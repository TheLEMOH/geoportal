(function(e){function t(t){for(var a,r,c=t[0],i=t[1],u=t[2],l=0,d=[];l<c.length;l++)r=c[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o={app:0},s=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2d0e95df":"ded0bad1","chunk-3655c1d6":"d92f70e6","chunk-41f16d8c":"a60ae576","chunk-16512fc4":"7e77dac4","chunk-4c1f063f":"d30d3a51","chunk-6b7d8eba":"6ef62c55","chunk-54ba3cd8":"9db4eda7","chunk-61d57874":"82f2410b","chunk-8ee82d52":"0a832f36","chunk-dfa99af4":"c81ae927","chunk-f3b2ad5c":"3109a7c3"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-3655c1d6":1,"chunk-41f16d8c":1,"chunk-16512fc4":1,"chunk-4c1f063f":1,"chunk-6b7d8eba":1,"chunk-54ba3cd8":1,"chunk-61d57874":1,"chunk-8ee82d52":1,"chunk-dfa99af4":1,"chunk-f3b2ad5c":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-2d0e95df":"31d6cfe0","chunk-3655c1d6":"39d5190b","chunk-41f16d8c":"5972dbfc","chunk-16512fc4":"e5cadb59","chunk-4c1f063f":"62c90a51","chunk-6b7d8eba":"83b6abcf","chunk-54ba3cd8":"015509e4","chunk-61d57874":"7111e341","chunk-8ee82d52":"63e5033a","chunk-dfa99af4":"1666750f","chunk-f3b2ad5c":"d8f9bbdb"}[e]+".css",o=i.p+a,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===a||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete r[e],p.parentNode.removeChild(p),n(s)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"37b5":function(e,t,n){"use strict";n("86ee")},5676:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar main border-bottom"},[n("div",{staticClass:"container-fluid"},[e._m(0),n("div",{staticClass:"me-auto p-2 text-white"},[n("router-link",{staticClass:"link-main-nav text-white h2",attrs:{to:{name:"Home"}}},[n("label",{staticClass:"navbar-home-name me-2"},[e._v("Картографический веб-портал Енисей плюс")]),n("HomeIcon")],1)],1),n("div",{staticClass:"p-2 bd-highlight"},[n("Login")],1)])]),n("LoginModal"),n("Message"),n("Nav"),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"p-0"},[a("img",{attrs:{src:n("cf05"),height:"60px",width:"60px"}})])}],s=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-fill p-0 m-0 text-white"},[e.user?e._e():n("div",{staticClass:"link-light float-end",on:{click:function(t){return e.UpdateShowLoginModal(!0)}}},[n("Person")],1),e.user?n("div",{staticClass:"dropdown float-end"},[n("a",{staticClass:"link link-light dropdown-toggle p-1 fs-4",attrs:{id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e._v(" "+e._s(e.user.name)+" ")]),n("ul",{staticClass:"dropdown-menu dropdown-menu-end"},[n("li",[n("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"Dashboard"}}},[e._v("Редактирование материалов")]),n("a",{staticClass:"dropdown-item",attrs:{href:"/"},on:{click:e.Logout}},[e._v("Выйти")]),n("button",{staticClass:"dropdown-item",on:{click:function(t){return e.DisplayMessage("Тест сообщения")}}},[e._v(" Тест сообщения ")])],1)])]):e._e()])}),c=[],i=n("5530"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-person m-0 p-0",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"}})])},l=[],d=n("2877"),p={},f=Object(d["a"])(p,u,l,!1,null,null,null),g=f.exports,m=n("2f62"),h={components:{Person:g},computed:Object(m["c"])(["user"]),methods:Object(i["a"])(Object(i["a"])({},Object(m["b"])(["CheckUser","Logout","DisplayMessage","UpdateShowLoginModal"])),Object(m["d"])(["updateLogin","updatePassword"])),mounted:function(){this.CheckUser()}},w=h,v=Object(d["a"])(w,s,c,!1,null,null,null),b=v.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"nav justify-content-evenly align-items-center fs-4 border shadow",staticStyle:{"z-index":"2","min-height":"50px"}},e._l(e.links,(function(t,a){return n("router-link",{key:a,staticClass:"link m-0 p-1",attrs:{to:{name:t.to}}},[n("span",{staticClass:"nav-collapse me-2"},[e._v(e._s(t.title))]),n(t.icon,{tag:"component",attrs:{data:{w:25,h:25}}})],1)})),1)},k=[],j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-geo-alt-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.data.w,height:e.data.h,fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"}})])},C=[],L={props:["data"]},S=L,x=Object(d["a"])(S,j,C,!1,null,null,null),O=x.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-stack",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.data.w,height:e.data.h,fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.598.598 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.598.598 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.598.598 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535L7.733.063z"}}),n("path",{attrs:{d:"m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.598.598 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.659z"}})])},N=[],A={props:["data"]},P=A,M=Object(d["a"])(P,I,N,!1,null,null,null),T=M.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-image-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.data.w,height:e.data.h,fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M.002 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-12a2 2 0 0 1-2-2V3zm1 9v1a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12zm5-6.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"}})])},R=[],D={props:["data"]},_=D,U=Object(d["a"])(_,E,R,!1,null,null,null),B=U.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-calendar2-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.data.w,height:e.data.h,fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M4 .5a.5.5 0 0 0-1 0V1H2a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-1V.5a.5.5 0 0 0-1 0V1H4V.5zM2.545 3h10.91c.3 0 .545.224.545.5v1c0 .276-.244.5-.546.5H2.545C2.245 5 2 4.776 2 4.5v-1c0-.276.244-.5.545-.5z"}})])},z=[],J={props:["data"]},H=J,V=Object(d["a"])(H,F,z,!1,null,null,null),Y=V.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-info-square-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.data.w,height:e.data.h,fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.93 4.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}})])},G=[],Q={props:["data"]},q=Q,Z=Object(d["a"])(q,$,G,!1,null,null,null),W=Z.exports,K={data:function(){return{links:[{title:"Картографические материалы",to:"Map",icon:"MarkerIcon"},{title:"Каталог ресурсов",to:"Catalogs",icon:"LayersMarker"},{title:"О проекте",to:"About",icon:"InfoIcon"},{title:"Фотогалерея",to:"Gallery",icon:"ImageIcon"},{title:"Новости портала",to:"News",icon:"NewsIcon"}]}},components:{MarkerIcon:O,LayersMarker:T,ImageIcon:B,NewsIcon:Y,InfoIcon:W}},X=K,ee=(n("8c4a"),Object(d["a"])(X,y,k,!1,null,"68937882",null)),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"\n    message-wrapper\n    position-absolute\n    top-0\n    start-50\n    translate-middle-x\n    m-1\n  "},[n("transition-group",{staticClass:"d-flex flex-row",attrs:{name:"list"}},e._l(e.messages,(function(t){return n("div",{key:t.id,staticClass:"card text-center shadow m-2"},[n("div",{staticClass:"card-header bg-info"},[e._v("Оповещение")]),n("div",{staticClass:"card-body"},[n("p",{staticClass:"card-text text-center"},[e._v(e._s(t.text))])])])})),0)],1)},ae=[],re={computed:Object(m["c"])(["messages"]),methods:Object(m["b"])([])},oe=re,se=(n("92a4"),Object(d["a"])(oe,ne,ae,!1,null,null,null)),ce=se.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.showLoginModal?n("div",{staticClass:"\n      card\n      login\n      position-absolute position-absolute\n      top-0\n      start-50\n      translate-middle-x\n      m-1\n      p-3\n    "},[n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-label",attrs:{for:""}},[e._v("Логин")]),n("input",{staticClass:"form-control",attrs:{placeholder:"Введите логин"},domProps:{value:e.login},on:{input:e.updateLogin}})]),n("div",{staticClass:"mb-3"},[n("label",{staticClass:"form-label",attrs:{for:""}},[e._v("Пароль")]),n("input",{staticClass:"form-control",attrs:{type:"password",placeholder:"Введите пароль"},domProps:{value:e.password},on:{input:e.updatePassword}})]),n("div",{staticClass:"d-flex"},[n("button",{staticClass:"btn btn-primary me-1",on:{click:e.Login}},[e._v("Войти")]),n("button",{staticClass:"btn btn-secondary",on:{click:function(t){return e.UpdateShowLoginModal(!1)}}},[e._v(" Закрыть ")])])]):e._e()])},ue=[],le={computed:Object(m["c"])(["user","login","password","showLoginModal"]),methods:Object(i["a"])(Object(i["a"])({},Object(m["b"])(["CheckUser","Login","Logout","DisplayMessage","UpdateShowLoginModal"])),Object(m["d"])(["updateLogin","updatePassword"]))},de=le,pe=(n("37b5"),Object(d["a"])(de,ie,ue,!1,null,null,null)),fe=pe.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-house-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6zm5-.793V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"}}),n("path",{attrs:{"fill-rule":"evenodd",d:"M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"}})])},me=[],he={},we=Object(d["a"])(he,ge,me,!1,null,null,null),ve=we.exports,be={components:{Login:b,Nav:te,Message:ce,LoginModal:fe,HomeIcon:ve},computed:{layout:function(){return this.$route.name}}},ye=be,ke=(n("034f"),Object(d["a"])(ye,r,o,!1,null,null,null)),je=ke.exports,Ce=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("8c4f"));a["a"].use(Ce["a"]);var Le=[{path:"/",name:"Home",component:function(){return n.e("chunk-dfa99af4").then(n.bind(null,"bb51"))}},{path:"/map",name:"Map",component:function(){return n.e("chunk-f3b2ad5c").then(n.bind(null,"4bb4"))}},{path:"/about",name:"About",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-6b7d8eba")]).then(n.bind(null,"f820"))}},{path:"/dashboard",name:"Dashboard",component:function(){return n.e("chunk-8ee82d52").then(n.bind(null,"7277"))},beforeEnter:function(e,t,n){var a=JSON.parse(localStorage.getItem("YENISEI_AUTH"));if(a){var r=Number(a.role);2==r||3==r?n():n({name:"Home"})}else n({name:"Home"})}},{path:"/news",name:"News",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-4c1f063f")]).then(n.bind(null,"a2f9"))}},{path:"/gallery",name:"Gallery",component:function(){return n.e("chunk-3655c1d6").then(n.bind(null,"0d77"))}},{path:"/catalogs",name:"Catalogs",component:function(){return n.e("chunk-61d57874").then(n.bind(null,"f79e"))}},{path:"/catalogs/:id",name:"CatalogsChildren",component:function(){return n.e("chunk-54ba3cd8").then(n.bind(null,"fce2"))}},{path:"*",name:"404",component:function(){return n.e("chunk-2d0e95df").then(n.bind(null,"8cdb"))}},{path:"/article/:id",name:"Article",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-16512fc4")]).then(n.bind(null,"3ad6"))}}],Se=new Ce["a"]({mode:"history",routes:Le}),xe=Se,Oe=n("1cf8"),Ie=n("256f"),Ne={state:{show:!1,information:null,currentPanel:"Catalogs",baseMaps:[{name:"Стандарт",url:"https://api.maptiler.com/maps/basic/{z}/{x}/{y}.png?key=NynhVPfsQFS9p8fzpF0c"},{name:"Рельеф",url:"https://api.maptiler.com/maps/topo/{z}/{x}/{y}.png?key=NynhVPfsQFS9p8fzpF0c"},{name:"Спутник",url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=NynhVPfsQFS9p8fzpF0c"},{name:"Черно-белая",url:"https://api.maptiler.com/maps/toner/{z}/{x}/{y}.png?key=NynhVPfsQFS9p8fzpF0c"}],currentBaseMap:0,zoom:5,center:[10382902.767976305,7603254.003900477],currentPosition:void 0},actions:{ChangeShow:function(e){e.commit("changeShow")},ChangeTextPopup:function(e,t){e.commit("changeTextPopup",t)},ChangeInformation:function(e,t){t.features&&e.commit("changeInformation",t)},UpdateCenter:function(e,t){var n=Object(Ie["k"])([Number(t[0]),Number(t[1])],"EPSG:4326","EPSG:3857");e.commit("updateCenter",n)}},mutations:{updateCenter:function(e,t){e.center=t},updateZoom:function(e,t){e.zoom=t},changeShow:function(e,t){e.show=t},changeTextPopup:function(e,t){e.information=t},changeCurrentPanel:function(e,t){e.currentPanel=t},changeBaseMap:function(e,t){e.currentBaseMap=t},changeCurrentPosition:function(e,t){e.currentPosition=t},changeInformation:function(e,t){e.information=t}},getters:{zoom:function(e){return e.zoom},center:function(e){return e.center},currentPosition:function(e){return e.currentPosition},show:function(e){return e.show},information:function(e){return e.information},currentPanel:function(e){return e.currentPanel},sidebarMapButtons:function(e){return e.sidebarMapButtons},baseMaps:function(e){return e.baseMaps},currentBaseMap:function(e){return e.currentBaseMap}}},Ae=n("1da1");n("159b"),n("a434"),n("96cf");function Pe(e,t){var n=e;if(n.length>0){var a=n[0],r=new FileReader;r.readAsDataURL(a),r.onload=function(e){var n=e.target.result;return t.img=n,n}}}function Me(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){t(a.result)},a.onerror=n,a.readAsDataURL(e)}))}var Te=n("53ca"),Ee=(n("99af"),n("ac1f"),n("466d"),[/^[A-Za-z]+$/,/[а-я-А-Я-0-9]/g]),Re=[/^[а-я-А-Я]+$/,/[A-Za-z-0-9]/g],De=[/^[A-Za-z-0-9]+$/,/[а-я-А-Я]/g],_e={latin:Ee,cyr:Re,pass:De};function Ue(e,t){var n=e.target.value;return n?e.target.value.match(_e[t][0])?(e.target.classList.remove("is-invalid"),n):(n=n.replaceAll(_e[t][1],""),e.target.classList.add("is-invalid"),e.target.value=n,n):null}function Be(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length,a=!0;if(t){for(var r=0;r<n;r++)if(a*=ze(e[r]),!a){a=!1;break}}else for(var o=0;o<n;o++)if(a*=Fe(e[o]),!a){a=!1;break}return a}function Fe(e){var t=!0;for(var n in e)if((""===e[n]||!e[n])&&"__v"!=n){console.log(n,e[n]),t=!1;break}return t}function ze(e){return!!e.firstName&&(!!e.lastName&&(!!e.login&&!(e.changePassword&&!e.password)))}var Je=n("1232"),He="http://enplus.petyaogurkin.keenetic.pro/api/auth/login/",Ve="http://enplus.petyaogurkin.keenetic.pro/api/auth/refresh/";function Ye(e){return $e.apply(this,arguments)}function $e(){return $e=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();var t=new Error(e.statusText);throw t.response=e,t})).catch((function(e){return console.log(e),{error:!0,text:e}})));case 1:case"end":return e.stop()}}),e)}))),$e.apply(this,arguments)}function Ge(e){return Qe.apply(this,arguments)}function Qe(){return Qe=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),n&&(a=fetch(Ve,{method:"POST",body:JSON.stringify({refreshToken:n.refreshToken}),headers:{"Content-Type":"application/json"}}),a.then((function(e){if(!e.ok){var a=new Error(e.statusText);throw a.response=e,a}e.json().then((function(e){var a=Object(Je["a"])(e.accessToken),r={id:a.id,role:a.role,name:n.name,accessToken:e.accessToken,refreshToken:e.refreshToken};localStorage.setItem("YENISEI_AUTH",JSON.stringify(r)),t.commit("updateUser",r)}))})).catch((function(e){xe.push("/"),localStorage.removeItem("YENISEI_AUTH"),t.dispatch("DisplayMessage","login ".concat(e))})));case 2:case"end":return e.stop()}}),e)}))),Qe.apply(this,arguments)}var qe="http://enplus.petyaogurkin.keenetic.pro/api/news/",Ze="http://enplus.petyaogurkin.keenetic.pro/api/news/add/",We="http://enplus.petyaogurkin.keenetic.pro/api/news/edit/",Ke="http://enplus.petyaogurkin.keenetic.pro/api/news/remove/",Xe="http://enplus.petyaogurkin.keenetic.pro/api/gallery/",et="http://enplus.petyaogurkin.keenetic.pro/api/gallery/add",tt="http://enplus.petyaogurkin.keenetic.pro/api/gallery/remove/",nt="http://enplus.petyaogurkin.keenetic.pro/api/projects/",at="http://enplus.petyaogurkin.keenetic.pro/api/projects/add",rt="http://enplus.petyaogurkin.keenetic.pro/api/projects/edit/",ot="http://enplus.petyaogurkin.keenetic.pro/api/projects/remove/",st="http://enplus.petyaogurkin.keenetic.pro/api/sections/",ct="http://enplus.petyaogurkin.keenetic.pro/api/sections/add",it="http://enplus.petyaogurkin.keenetic.pro/api/sections/edit/",ut="http://enplus.petyaogurkin.keenetic.pro/api/sections/remove/",lt="http://enplus.petyaogurkin.keenetic.pro/api/articles/",dt="http://enplus.petyaogurkin.keenetic.pro/api/articles/add/",pt="http://enplus.petyaogurkin.keenetic.pro/api/articles/edit/",ft="http://enplus.petyaogurkin.keenetic.pro/api/articles/remove/",gt="http://enplus.petyaogurkin.keenetic.pro/api/users/",mt="http://enplus.petyaogurkin.keenetic.pro/api/users/add/",ht="http://enplus.petyaogurkin.keenetic.pro/api/users/edit/",wt="http://enplus.petyaogurkin.keenetic.pro/api/users/remove/",vt="http://enplus.petyaogurkin.keenetic.pro/api/maps/",bt="http://enplus.petyaogurkin.keenetic.pro/api/about/",yt="http://enplus.petyaogurkin.keenetic.pro/api/about/edit/",kt={news:{get:qe,add:Ze,edit:We,remove:Ke},gallery:{get:Xe,add:et,remove:tt},projects:{get:nt,add:at,edit:rt,remove:ot},catalogs:{get:st,add:ct,edit:it,remove:ut},articles:{get:lt,add:dt,edit:pt,remove:ft},maps:{get:vt},users:{get:gt,add:mt,edit:ht,remove:wt},about:{get:bt,edit:yt}};function jt(e,t){return Ct.apply(this,arguments)}function Ct(){return Ct=Object(Ae["a"])(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,fetch(kt[t].get,{headers:{Authorization:"Bearer ".concat(n)}});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.next=9,fetch(kt[t].get);case 9:return r=e.sent,e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)}))),Ct.apply(this,arguments)}function Lt(e,t){return St.apply(this,arguments)}function St(){return St=Object(Ae["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(kt[n].get+"".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),St.apply(this,arguments)}function xt(e,t,n){return Ot.apply(this,arguments)}function Ot(){return Ot=Object(Ae["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=fetch(kt[n].add,{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),Ot.apply(this,arguments)}function It(e,t,n){return Nt.apply(this,arguments)}function Nt(){return Nt=Object(Ae["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=fetch(kt[n].edit+"".concat(t._id),{method:"PUT",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),Nt.apply(this,arguments)}function At(e,t,n){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(Ae["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=fetch(kt[n].remove+"".concat(t._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),Pt.apply(this,arguments)}var Mt={add:xt,edit:It,delete:At};function Tt(e,t){return Et.apply(this,arguments)}function Et(){return Et=Object(Ae["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.loaded||jt(n.type,n.token).then((function(e){if(!e.ok){var a=new Error(e.statusText);throw a.response=e,a}e.json().then((function(e){n.funcClearDel&&t.commit(n.funcClearDel),t.commit(n.funcLoaded,!0),t.commit(n.funcUpdate,e)}))})).catch((function(e){t.dispatch("DisplayMessage","".concat(n.type," ").concat(e))}));case 1:case"end":return e.stop()}}),e)}))),Et.apply(this,arguments)}function Rt(e,t){Lt(t.id,t.type).then((function(n){if(!n.ok){var a=new Error(n.statusText);throw a.response=n,a}n.json().then((function(n){t.funcLoaded&&e.commit(t.funcLoaded,!0),e.commit(t.funcUpdate,n)}))})).catch((function(n){e.dispatch("DisplayMessage","".concat(t.type," ").concat(n))}))}function Dt(e,t,n,a){return new Promise((function(r,o){t(e,n,a).then((function(t){t.ok?("object"==Object(Te["a"])(e)&&(e.action="done"),r(t)):o(t)}))}))}function _t(e,t,n,a){var r=[];return e.forEach((function(e){e.action&&(r.push(Dt(e,Mt[e.action],n,a)),e.action="loading")})),t.forEach((function(e){r.push(Dt(e,Mt["delete"],n,a))})),r}function Ut(e,t){var n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),a=t.forSave,r=t.forDelete,o="users"==t.type,s=Be(a,o);if(s){t.updateSelected&&e.commit(t.updateSelected,null),t.updateLoaded&&e.commit(t.updateLoaded,!1),e.dispatch("DisplayMessage","Сохранение...");var c=_t(a,r,t.type,n.accessToken);Promise.all(c).then((function(){e.dispatch("DisplayMessage","Готово!"),setTimeout((function(){return e.dispatch(t.fetch)}),1e3)}),(function(n){"401"==n?(console.log("Истекло действие ключа"),Ge().then((function(){e.dispatch(t.save)}))):(e.dispatch("DisplayMessage",n.statusText),e.dispatch(t.fetch))}))}else e.dispatch("DisplayMessage",t.nonFilled)}var Bt={state:{originalNews:"[]",news:[],delNews:[],newsLoaded:!1,selectedNews:null},actions:{FetchNews:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.newsLoaded,type:"news",funcClearDel:"clearDelNews",funcLoaded:"updateNewsLoaded",funcUpdate:"updateNews"},Tt(e,n);case 2:case"end":return t.stop()}}),t)})))()},SaveNews:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={type:"news",forSave:e.state.news,forDelete:e.state.delNews,updateSelected:"updateSelectedNews",updateLoaded:"updateNewsLoaded",fetch:"FetchNews",save:"SaveNews",nonFilled:"Заполните все поля у новости!"},Ut(e,n);case 2:case"end":return t.stop()}}),t)})))()},TestImgNews:function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t.target.files,a.forEach((function(t){var n=Me(t);n.then((function(t){e.commit("addImageNews",t)}))}));case 2:case"end":return n.stop()}}),n)})))()},DeleteImageFromNews:function(e,t){e.commit("deleteImageFromNews",t)},AddNews:function(e){var t={title:null,body:null,date:null,imgBase:[],action:"add"},n=e.getters.newsLength;e.commit("addNews",t),e.commit("updateSelectedNews",n)},DeleteNews:function(e,t){e.commit("updateSelectedNews",null),e.commit("deleteNews",t)},Cancel:function(e){e.commit("updateSelectedNews",null),e.commit("cancel")},SelectNews:function(e,t){e.commit("updateSelectedNews",t)}},mutations:{deleteImageFromNews:function(e,t){var n=e.selectedNews,a=t.index,r=t.array;e.news[n].imgOld||(e.news[n].imgOld=[]),e.news[n].img&&"base"!=r&&(e.news[n].imgOld.push(e.news[n].img[a]),e.news[n].img.splice(a,1)),"base"==r&&e.news[n].imgBase.splice(a,1)},addImageNews:function(e,t){e.news[e.selectedNews].imgBase||a["a"].set(e.news[e.selectedNews],"imgBase",[]),e.news[e.selectedNews].imgBase.push(t)},addNews:function(e,t){e.news.push(t)},deleteNews:function(e,t){"add"==e.news[t].action||e.delNews.push(e.news[t]),e.news.splice(t,1)},updateNews:function(e,t){e.originalNews=JSON.stringify(t),e.news=t},clearDelNews:function(e){e.delNews=[]},cancel:function(e){e.delNews=[],e.news=JSON.parse(e.originalNews)},updateSelectedNews:function(e,t){null!=t&&"add"!=e.news[t].action&&(e.news[t].action="edit"),e.selectedNews=t},updateNewsLoaded:function(e,t){e.newsLoaded=t}},getters:{news:function(e){return e.news},newsLength:function(e){return e.news.length},selectedNews:function(e){return e.selectedNews},newsLoaded:function(e){return e.newsLoaded}}},Ft={state:{users:[],delUsers:[],originalUsers:"[]",user:null,firstName:null,lastName:null,newLogin:null,newPassword:null,role:null,usersLoaded:!1},actions:{AddUser:function(e){var t=this;return Object(Ae["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={firstName:e.state.firstName,lastName:e.state.lastName,password:e.state.newPassword,login:e.state.newLogin,role:e.state.role,changePassword:!1,action:"add"},r=Fe(a),r?e.commit("addUser",a):t.dispatch("DisplayMessage","Заполните все поля у пользователя!");case 3:case"end":return n.stop()}}),n)})))()},DeleteUser:function(e,t){var n=this;return Object(Ae["a"])(regeneratorRuntime.mark((function a(){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=JSON.parse(localStorage.getItem("YENISEI_AUTH")).id,o=e.state.users[t]._id==r,o?n.dispatch("DisplayMessage","Нельзя удалить себя"):e.commit("deleteUser",t);case 3:case"end":return a.stop()}}),a)})))()},FetchUsers:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),a={loaded:e.state.usersLoaded,type:"users",token:n.accessToken,funcClearDel:"clearDelUsers",funcLoaded:"updateUsersLoaded",funcUpdate:"updateUsers"},Tt(e,a);case 3:case"end":return t.stop()}}),t)})))()},SaveUsers:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={forSave:e.state.users,forDelete:e.state.delUsers,updateSelected:null,updateLoaded:"updateUsersLoaded",type:"users",fetch:"FetchUsers",save:"SaveUsers",nonFilled:"Заполните все поля у пользователя!"},Ut(e,n);case 2:case"end":return t.stop()}}),t)})))()},CancelUsers:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.commit("cancelUsers");case 1:case"end":return t.stop()}}),t)})))()},UpdateField:function(e,t){e.commit("updateField",t)}},mutations:{addUser:function(e,t){e.users.push(t)},deleteUser:function(e,t){"add"==e.users[t].action||e.delUsers.push(e.users[t]),e.users.splice(t,1)},updateUsers:function(e,t){t.forEach((function(e){e.changePassword=!1,e.password=null})),e.originalUsers=JSON.stringify(t),e.users=t},cancelUsers:function(e){e.delUsers=[],e.users=JSON.parse(e.originalUsers)},updateFirstname:function(e,t){e.firstName=Ue(t,"cyr")},updateLastname:function(e,t){e.lastName=Ue(t,"cyr")},updateNewLogin:function(e,t){e.newLogin=Ue(t,"latin")},updateNewPassword:function(e,t){e.newPassword=Ue(t,"pass")},updateField:function(e,t){"add"!=e.users[t.index].action&&(e.users[t.index].action="edit"),"firstName"==t.field&&(e.users[t.index][t.field]=Ue(t.event,"cyr")),"lastName"==t.field&&(e.users[t.index][t.field]=Ue(t.event,"cyr")),"login"==t.field&&(e.users[t.index][t.field]=Ue(t.event,"latin")),"password"==t.field&&(e.users[t.index][t.field]=Ue(t.event,"pass")),"role"==t.field&&a["a"].set(e.users[t.index],t.field,t.event.target.value),"changePassword"==t.field&&(a["a"].set(e.users[t.index],t.field,t.event.target.checked),e.users[t.index].password=null)},updateRole:function(e,t){e.role=t.target.value},updateUsersLoaded:function(e,t){e.usersLoaded=t},clearDelUsers:function(e){e.delUsers=[]}},getters:{users:function(e){return e.users},firstname:function(e){return e.firstName},lastname:function(e){return e.lastName},newPassword:function(e){return e.newPassword},newLogin:function(e){return e.newLogin},role:function(e){return e.role},usersLoaded:function(e){return e.usersLoaded}}},zt="http://enplus.petyaogurkin.keenetic.pro/api/auth/logout/",Jt={state:{user:null,login:null,password:null,showLoginModal:!1},actions:{Login:function(e){var t=this;return Object(Ae["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={login:e.state.login,password:e.state.password},r=Fe(a),r&&Ye(a).then((function(n){if(1!=n.error){var r=Object(Je["a"])(n.accessToken),o={id:r.id,role:r.role,name:a.login,accessToken:n.accessToken,refreshToken:n.refreshToken};t.dispatch("DisplayMessage","Успешно!"),t.dispatch("UpdateShowLoginModal",!1),localStorage.setItem("YENISEI_AUTH",JSON.stringify(o)),e.commit("updateUser",o)}else t.dispatch("DisplayMessage",n.text)}));case 3:case"end":return n.stop()}}),n)})))()},Logout:function(){return Object(Ae["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=JSON.parse(localStorage.getItem("YENISEI_AUTH")),fetch(zt,{method:"POST",headers:{Authorization:"Bearer ".concat(t.accessToken)},body:JSON.stringify(t.refreshToken)}),localStorage.removeItem("YENISEI_AUTH");case 3:case"end":return e.stop()}}),e)})))()},CheckUser:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Ge(e);case 1:case"end":return t.stop()}}),t)})))()},RefreshUser:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Ge(e);case 1:case"end":return t.stop()}}),t)})))()},UpdateShowLoginModal:function(e,t){e.commit("updateShowLoginModal",t)}},mutations:{updateLogin:function(e,t){e.login=Ue(t,"latin")},updatePassword:function(e,t){e.password=Ue(t,"pass")},updateUser:function(e,t){e.user=t},updateShowLoginModal:function(e,t){e.showLoginModal=t}},getters:{user:function(e){return e.user},login:function(e){return e.login},password:function(e){return e.password},showLoginModal:function(e){return e.showLoginModal}}},Ht={state:{about:null},actions:{FetchAbout:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:fetch(kt.about.get).then((function(t){t.json().then((function(t){e.commit("updateAbout",t)}))})).catch((function(t){e.commit("DisplayMessage","about ".concat(t))}));case 1:case"end":return t.stop()}}),t)})))()},EditAbout:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state.about[0].body,a=JSON.parse(localStorage.getItem("YENISEI_AUTH")),t.next=4,fetch(kt.about.edit,{method:"PUT",body:JSON.stringify({body:n}),headers:{Authorization:"Bearer ".concat(a.accessToken),"Content-Type":"application/json"}});case 4:return r=t.sent,t.next=7,r.json();case 7:o=t.sent,console.log(o);case 9:case"end":return t.stop()}}),t)})))()}},mutations:{updateAbout:function(e,t){e.about=t}},getters:{about:function(e){return e.about}}},Vt=(n("d81d"),n("c740"),n("41b9")),Yt={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png",SYMBOLWIDTH:10,SYMBOLHEIGHT:5,LAYERSPACE:1,LAYERTITLESPACE:1,ICONLABELSPACE:1,LAYERTITLE:!1,RULELABEL:!0,TRANSPARENT:!0,ITEMFONTCOLOR:"white",ITEMFONTSIZE:"12"};function $t(e){return Gt.apply(this,arguments)}function Gt(){return Gt=Object(Ae["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Vt["a"],a="http://enplus.petyaogurkin.keenetic.pro/qgisserver/".concat(t,"?VERSION=1.3.0&REQUEST=GetCapabilities&SERVICE=WMS"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.text();case 7:return o=e.sent,s=n.read(o),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)}))),Gt.apply(this,arguments)}function Qt(e){for(var t="",n=0;n<e.Capability.Layer.Layer.length;n++)t+=e.Capability.Layer.Layer[n].Name+",";return t}function qt(e){return e.Capability.Layer.EX_GeographicBoundingBox}function Zt(e){var t=(e[0]+e[2])/2,n=(e[1]+e[3])/2;return[t,n]}var Wt={state:{originalProjects:"[]",projects:[],delProjects:[],existingMaps:[],selectedProject:null,projectsLoaded:!1,mapsLoaded:!1,projectsToDisplay:[],openedProject:null,capabilities:{},legend:[]},actions:{FetchProjects:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.projectsLoaded,type:"projects",funcClearDel:"clearDelProjects",funcLoaded:"updateProjectsLoaded",funcUpdate:"updateProjects"},Tt(e,n);case 2:case"end":return t.stop()}}),t)})))()},SaveProjects:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={forSave:e.state.projects,forDelete:e.state.delProjects,updateSelected:"updateSelectedProject",updateLoaded:"updateProjectsLoaded",type:"projects",fetch:"FetchProjects",save:"SaveProjects",nonFilled:"Заполните все поля у проекта!"},Ut(e,n);case 2:case"end":return t.stop()}}),t)})))()},Capabilities:function(e,t){var n=this;return Object(Ae["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=t.legend,r||$t(t.map).then((function(n){var a=Qt(n),r=qt(n),o=Zt(r),s="";for(var c in Yt)s+="".concat(c,"=").concat(Yt[c],"&");var i="http://enplus.petyaogurkin.keenetic.pro/qgisserver/".concat(t.map,"?").concat(s,"LAYERS=").concat(a);e.commit("updateCapabilities",{id:t._id,legend:i,layers:a,center:o})})).catch((function(e){n.dispatch("DisplayMessage","Ошибка загрузки карты ".concat(e))}));case 2:case"end":return a.stop()}}),a)})))()},FetchMaps:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),a={loaded:e.state.mapsLoaded,type:"maps",token:n.accessToken,funcClearDel:null,funcLoaded:"updateMapsLoaded",funcUpdate:"updateExistingMaps"},Tt(e,a);case 3:case"end":return t.stop()}}),t)})))()},UpdateProjectsToDisplay:function(e,t){e.commit("updateProjectsToDisplay",t._id),t.visible&&this.dispatch("Capabilities",t)},AddProject:function(e){var t={title:null,description:null,section:null,map:null,action:"add"},n=e.getters.projectsLength;e.commit("addProject",t),e.commit("updateSelectedProject",n)},DeleteProject:function(e,t){e.commit("updateSelectedProject",null),e.commit("deleteProject",t)},SelectProject:function(e,t){e.commit("updateSelectedProject",t)},CancelProjects:function(e){e.commit("updateSelectedProject",null),e.commit("cancelProjects")},OpenProject:function(e){var t=e.state.openedProject;if(t){var n=document.getElementById("collapseCatalog"+t.parent),a=document.getElementById("input-project"+t.id);n&&(n.classList.add("show"),a.dispatchEvent(new Event("change")),e.commit("updateOpenedProject",null))}},UpdateOpenedProject:function(e,t){e.commit("updateOpenedProject",t)}},mutations:{updateOpenedProject:function(e,t){e.openedProject=t},clearDelProjects:function(e){e.delProjects=[]},updateProjectsLoaded:function(e,t){e.projectsLoaded=t},updateLegend:function(e,t){e.legend.push(t)},updateCapabilities:function(e,t){var n=e.projectsToDisplay.findIndex((function(e){return e._id==t.id}));a["a"].set(e.projectsToDisplay[n],"legend",t.legend),a["a"].set(e.projectsToDisplay[n],"layers",t.layers),a["a"].set(e.projectsToDisplay[n],"center",t.center)},cancelProjects:function(e){e.delProjects=[],e.projects=JSON.parse(e.originalProjects)},updateProjectsToDisplay:function(e,t){var n=e.projectsToDisplay.findIndex((function(e){return e._id==t}));a["a"].set(e.projectsToDisplay[n],"visible",!e.projectsToDisplay[n].visible)},clearProjectsToDisplay:function(e){e.projectsToDisplay=[]},updateExistingMaps:function(e,t){e.existingMaps=t},addProject:function(e,t){e.projects.push(t)},updateSelectedProject:function(e,t){null!=t&&"add"!=e.projects[t].action&&(e.projects[t].action="edit"),e.selectedProject=t},updateProjects:function(e,t){e.originalProjects=JSON.stringify(t),e.projects=t,e.projectsToDisplay=[],t.forEach((function(t){var n={title:t.title,_id:t._id,map:t.map,visible:!1,loaded:!0,section:t.section};e.projectsToDisplay.push(n)}))},deleteProject:function(e,t){"add"==e.projects[t].action||e.delProjects.push(e.projects[t]),e.projects.splice(t,1)},updateMapsLoaded:function(e,t){e.mapsLoaded=t}},getters:{legend:function(e){return e.legend},capabilities:function(e){return e.capabilities},projectsToDisplay:function(e){return e.projectsToDisplay},existingMaps:function(e){return e.existingMaps},projectsLength:function(e){return e.projects.length},projects:function(e){return e.projects},selectedProject:function(e){return e.selectedProject},projectsLoaded:function(e){return e.projectsLoaded}}},Kt={state:{messages:[],showMessage:[],displayTime:2500},actions:{DisplayMessage:function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=(new Date).getTime(),e.commit("updateMessage",{text:t,id:a}),setTimeout((function(){e.commit("closeMessage",a)}),e.state.displayTime);case 3:case"end":return n.stop()}}),n)})))()},DisplayMessageEver:function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.commit("updateMessage",t);case 1:case"end":return n.stop()}}),n)})))()}},mutations:{updateMessage:function(e,t){e.messages.push(t)},closeMessage:function(e,t){var n=e.messages.findIndex((function(e){return e.id==t}));-1!=n&&e.messages.splice(n,1)}},getters:{lengthMessages:function(e){return e.messages.length},messages:function(e){return e.messages},showMessage:function(e){return e.showMessage}}},Xt={state:{originalCatalogs:"[]",catalogs:[],catalogById:null,openedCatalog:null,delCatalogs:[],selectedCatalog:null,"сatalogsLoaded":!1,"сatalogByIdLoaded":!1},actions:{FetchCatalogs:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.сatalogsLoaded,type:"catalogs",funcClearDel:"clearDelCatalogs",funcLoaded:"updateCatalogsLoaded",funcUpdate:"updateCatalogs"},Tt(e,n);case 2:case"end":return t.stop()}}),t)})))()},FetchCatalogById:function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={id:t,type:"catalogs",funcUpdate:"updateCatalogByid",funcLoaded:"updateCatalogByIdLoaded"},e.commit("updateCatalogByIdLoaded",!1),Rt(e,a);case 3:case"end":return n.stop()}}),n)})))()},SaveCatalogs:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={forSave:e.state.catalogs,forDelete:e.state.delCatalogs,updateSelected:"updateSelectedCatalog",updateLoaded:"updateCatalogsLoaded",type:"catalogs",fetch:"FetchCatalogs",save:"SaveCatalogs",nonFilled:"Заполните все поля у каталога!"},Ut(e,n);case 2:case"end":return t.stop()}}),t)})))()},FecthProjectsFromCatalogs:function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="http://enplus.petyaogurkin.keenetic.pro/api/sections/".concat(t),e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,console.log(r);case 8:case"end":return e.stop()}}),e)})))()},TestIMG:function(e,t){var n=t.target.files,a=e.state.catalogs[e.state.selectedCatalog];Pe(n,a)},AddCatalog:function(e){var t={title:null,description:null,img:null,action:"add"},n=e.getters.catalogsLength;e.commit("addCatalog",t),e.commit("updateSelectedCatalog",n)},DeleteCatalog:function(e,t){e.commit("updateSelectedCatalog",null),e.commit("deleteCatalog",t)},SelectCatalog:function(e,t){e.commit("updateSelectedCatalog",t)},CancelCatalogs:function(e){e.commit("updateSelectedCatalog",null),e.commit("cancelCatalogs")},UpdateOpenedCatalogs:function(e,t){e.commit("updateOpenedCatalog",t)},OpenCatalog:function(e){var t=e.state.openedCatalog,n=document.getElementById("collapseCatalog"+t);n&&(n.classList.add("show"),e.commit("updateOpenedCatalog",null))}},mutations:{updateCatalogsLoaded:function(e,t){e.сatalogsLoaded=t},updateCatalogByIdLoaded:function(e,t){e.сatalogByIdLoaded=t},updateOpenedCatalog:function(e,t){e.openedCatalog=t},cancelCatalogs:function(e){e.delCatalogs=[],e.catalogs=JSON.parse(e.originalCatalogs)},addCatalog:function(e,t){e.catalogs.push(t)},updateSelectedCatalog:function(e,t){null!=t&&"add"!=e.catalogs[t].action&&(e.catalogs[t].action="edit"),e.selectedCatalog=t},updateCatalogs:function(e,t){e.originalCatalogs=JSON.stringify(t),e.catalogs=t},updateCatalogByid:function(e,t){e.catalogById=t},clearDelCatalogs:function(e){e.delCatalogs=[]},deleteCatalog:function(e,t){"add"==e.catalogs[t].action||e.delCatalogs.push(e.catalogs[t]),e.catalogs.splice(t,1)}},getters:{catalogsLength:function(e){return e.catalogs.length},catalogs:function(e){return e.catalogs},selectedCatalog:function(e){return e.selectedCatalog},openedCatalogs:function(e){return e.openedCatalogs},"сatalogsLoaded":function(e){return e.сatalogsLoaded},"сatalogByIdLoaded":function(e){return e.сatalogByIdLoaded},catalogById:function(e){return e.catalogById}}},en={state:{showModalAddImage:!1,images:[],delImages:[],imagesLoaded:!1,imageInBase:null},actions:{FetchGallery:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.imagesLoaded,type:"gallery",funcClearDel:"clearDelImages",funcLoaded:"updateImagesLoaded",funcUpdate:"updateImages"},Tt(e,n);case 2:case"end":return t.stop()}}),t)})))()},SaveGallery:function(e){var t={forSave:e.state.images,forDelete:e.state.delImages,updateSelected:null,updateLoaded:"updateImagesLoaded",type:"gallery",fetch:"FetchGallery",save:"SaveGallery",nonFilled:"Выберите картинки"};Ut(e,t)},TestImgGallery:function(e,t){var n=this;return Object(Ae["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.target.files,a.forEach((function(e){var t=Me(e);t.then((function(e){n.dispatch("AddImage",e)}))}));case 2:case"end":return e.stop()}}),e)})))()},AddImage:function(e,t){var n={img:t,action:"add"};e.commit("addImage",n)},DeleteImage:function(e,t){e.commit("deteleImage",t)},CloseModalAddImage:function(e){e.commit("updateShowModalAddImage",!1)},OpenModalAddImage:function(e){e.commit("updateShowModalAddImage",!0)}},mutations:{clearDelImages:function(e){e.delImages=[]},deteleImage:function(e,t){"add"==e.images[t].action||e.delImages.push({_id:e.images[t]}),e.images.splice(t,1)},addImage:function(e,t){e.images.push(t)},updateImages:function(e,t){e.images=t},updateShowModalAddImage:function(e,t){e.showModalAddImage=t},updateImagesLoaded:function(e,t){e.imagesLoaded=t}},getters:{showModalAddImage:function(e){return e.showModalAddImage},images:function(e){return e.images},imagesToSave:function(e){return e.imagesToSave},imagesLoaded:function(e){return e.imagesLoaded}}},tn={state:{originalArticles:"[]",articles:[],articleById:null,articlesLoaded:!1,selectedArticle:null,delArticles:[]},actions:{FetchArticles:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.articlesLoaded,type:"articles",funcClearDel:"clearDelArticles",funcLoaded:"updateArticlesLoaded",funcUpdate:"updateArticles"},Tt(e,n);case 2:case"end":return t.stop()}}),t)})))()},SaveArticles:function(e){return Object(Ae["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={forSave:e.state.articles,forDelete:e.state.delArticles,updateSelected:"updateSelectedArticle",updateLoaded:"updateArticlesLoaded",type:"articles",fetch:"FetchArticles",save:"SaveArticles",nonFilled:"Заполните все поля у статьи!"},Ut(e,n);case 2:case"end":return t.stop()}}),t)})))()},FetchArticleById:function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={id:t,type:"articles",funcUpdate:"updateArticleByid"},Rt(e,a);case 2:case"end":return n.stop()}}),n)})))()},AddImageArticle:function(e,t){return Object(Ae["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t.target.files,a.forEach((function(t){var n=Me(t);n.then((function(t){e.commit("addImageArticle",t)}))}));case 2:case"end":return n.stop()}}),n)})))()},AddArticle:function(e){var t={title:null,body:null,imgBase:[],action:"add"},n=e.getters.articlesLength;e.commit("addArticle",t),e.commit("updateSelectedArticle",n)},CancelArticles:function(e){e.commit("updateSelectedArticle",null),e.commit("cancelArticles")},SelectArticle:function(e,t){e.commit("updateSelectedArticle",t)},DeleteArticle:function(e,t){e.commit("updateSelectedArticle",null),e.commit("deleteArticle",t)},CopyUrlArticle:function(e,t){this.dispatch("DisplayMessage","Ссылка скопирована!");var n="http://localhost:8080/article/".concat(t);navigator.clipboard.writeText(n)},DeleteImageFromArticle:function(e,t){e.commit("deleteImageFromArticle",t)}},mutations:{clearDelArticles:function(e){e.delArticles=[]},deleteImageFromArticle:function(e,t){var n=e.selectedArticle,a=t.index,r=t.array;e.articles[n].imgOld||(e.articles[n].imgOld=[]),e.articles[n].img&&"base"!=r&&(e.articles[n].imgOld.push(e.articles[n].img[a]),e.articles[n].img.splice(a,1)),"base"==r&&e.articles[n].imgBase.splice(a,1)},addImageArticle:function(e,t){var n=e.selectedArticle;e.articles[n].imgBase||a["a"].set(e.articles[n],"imgBase",[]),e.articles[n].imgBase.push(t)},addArticle:function(e,t){e.articles.push(t)},updateArticlesLoaded:function(e,t){e.articlesLoaded=t},updateArticles:function(e,t){e.originalArticles=JSON.stringify(t),e.articles=t},updateSelectedArticle:function(e,t){null!=t&&"add"!=e.articles[t].action&&(e.articles[t].action="edit"),e.selectedArticle=t},deleteArticle:function(e,t){"add"==e.articles[t].action||e.delArticles.push(e.articles[t]),e.articles.splice(t,1)},cancelArticles:function(e){e.delArticles=[],e.articles=JSON.parse(e.originalArticles)},updateArticleByid:function(e,t){e.articleById=t}},getters:{articlesLength:function(e){return e.articles.length},articles:function(e){return e.articles},selectedArticle:function(e){return e.selectedArticle},articlesLoaded:function(e){return e.articlesLoaded},articleById:function(e){return e.articleById}}};a["a"].use(m["a"]);var nn=new m["a"].Store({actions:{},mutations:{},state:{},getters:{},modules:{map:Ne,news:Bt,users:Ft,login:Jt,about:Ht,projects:Wt,message:Kt,catalogs:Xt,gallery:en,articles:tn}});n("ab8b"),n("3e48"),n("3aec");a["a"].config.productionTip=!1,a["a"].use(Oe["a"]),new a["a"]({router:xe,store:nn,render:function(e){return e(je)}}).$mount("#app")},"85ec":function(e,t,n){},"86ee":function(e,t,n){},"8c4a":function(e,t,n){"use strict";n("5676")},"92a4":function(e,t,n){"use strict";n("977a")},"977a":function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.03f89c0a.png"}});
//# sourceMappingURL=app.6fcae66f.js.map
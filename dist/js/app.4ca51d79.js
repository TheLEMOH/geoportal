(function(e){function t(t){for(var a,r,c=t[0],i=t[1],u=t[2],l=0,p=[];l<c.length;l++)r=c[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o={app:0},s=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-00bd30ef":"f8472161","chunk-2bbe0e23":"3aa59408","chunk-2ce1fe82":"b4526274","chunk-2d0e95df":"47b1bae8","chunk-32806c68":"451ea795","chunk-41f16d8c":"0e276208","chunk-24a73167":"a7ff937b","chunk-8fed80c6":"008eae07","chunk-61d57874":"834c963a","chunk-69d99c60":"9741b95a","chunk-9f46e094":"eb765b23"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-00bd30ef":1,"chunk-2bbe0e23":1,"chunk-2ce1fe82":1,"chunk-32806c68":1,"chunk-41f16d8c":1,"chunk-24a73167":1,"chunk-8fed80c6":1,"chunk-61d57874":1,"chunk-69d99c60":1,"chunk-9f46e094":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-00bd30ef":"cadc175a","chunk-2bbe0e23":"8f58abfc","chunk-2ce1fe82":"459fcc0c","chunk-2d0e95df":"31d6cfe0","chunk-32806c68":"452a3cdb","chunk-41f16d8c":"d217dcc8","chunk-24a73167":"89d125f9","chunk-8fed80c6":"98a0daff","chunk-61d57874":"bfe7df62","chunk-69d99c60":"af147698","chunk-9f46e094":"83bcd83a"}[e]+".css",o=i.p+a,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===o))return t()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){u=p[c],l=u.getAttribute("data-href");if(l===a||l===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete r[e],d.parentNode.removeChild(d),n(s)},d.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=c(e);var p=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",p.name="ChunkLoadError",p.type=a,p.request=r,n[1](p)}o[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},3566:function(e,t,n){"use strict";n("8487")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar main p-2 border"},[a("div",{staticClass:"container-fluid justify-content-start"},[a("img",{staticClass:"me-4",attrs:{src:n("cf05"),height:"60px",width:"60px"}}),a("h2",{staticClass:"text-white m-0 p-0"},[e._v(" Картографический веб-портал Енисей плюс ")]),a("Login")],1)]),a("Message"),a("Nav"),a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)},o=[],s=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-fill p-0 m-0"},[e.user?e._e():n("a",{staticClass:"link-light float-end",attrs:{"data-bs-toggle":"modal","data-bs-target":"#exampleModal"}},[n("Person")],1),e.user?n("div",{staticClass:"dropdown float-end"},[n("a",{staticClass:"link link-light dropdown-toggle p-1",attrs:{id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e._v(" "+e._s(e.user.name)+" ")]),n("ul",{staticClass:"dropdown-menu dropdown-menu-end",attrs:{"aria-labelledby":"dropdownMenuLink"}},[n("li",[n("a",{staticClass:"dropdown-item",attrs:{href:"/dashboard"}},[e._v("Редактирование материалов")]),n("a",{staticClass:"dropdown-item",attrs:{href:"/"},on:{click:e.Logout}},[e._v("Выйти")]),n("button",{staticClass:"dropdown-item",on:{click:function(t){return e.DisplayMessage("Тест сообщения")}}},[e._v(" Тест сообщения ")])])])]):e._e(),n("div",{ref:"Modal",staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[n("div",{ref:"Modalr",staticClass:"modal-dialog"},[n("div",{staticClass:"modal-content"},[e._m(0),n("div",{staticClass:"modal-body background"},[n("div",{staticClass:"form-floating mb-3"},[n("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.login},on:{input:e.updateLogin}}),n("label",{attrs:{for:"floatingInput"}},[e._v("Имя пользователя")])]),n("div",{staticClass:"form-floating"},[n("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.password},on:{input:e.updatePassword}}),n("label",{attrs:{for:"floatingPassword"}},[e._v("Пароль")])])]),n("div",{staticClass:"modal-footer additional"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[e._v(" Закрыть ")]),n("button",{staticClass:"btn background text-white",attrs:{type:"button"},on:{click:e.Login}},[e._v(" Войти ")])])])])])])}),c=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-header text-white additional"},[n("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._v("Вход")]),n("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}},[e._v(" × ")])])}],i=n("5530"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-person m-0 p-0",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"}})])},l=[],p={},d=p,f=n("2877"),h=Object(f["a"])(d,u,l,!1,null,null,null),m=h.exports,g=n("2f62"),w={components:{Person:m},computed:Object(g["c"])(["user","login","password","showMessage"]),methods:Object(i["a"])(Object(i["a"])({},Object(g["b"])(["CheckUser","Login","Logout","DisplayMessage"])),Object(g["d"])(["updateLogin","updatePassword"])),mounted:function(){this.CheckUser()}},b=w,v=Object(f["a"])(b,s,c,!1,null,null,null),k=v.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nav justify-content-evenly fs-4 border shadow",staticStyle:{"z-index":"2"}},[n("a",{staticClass:"link",attrs:{href:"/map"}},[e._v("Картографические материалы ")]),n("a",{staticClass:"link",attrs:{href:"/catalogs"}},[e._v("Каталог ресурсов")]),n("a",{staticClass:"link",attrs:{href:"/about"}},[e._v("О проекте")]),n("a",{staticClass:"link",attrs:{href:"/gallery"}},[e._v("Фотогалерея")]),n("a",{staticClass:"link",attrs:{href:"/news"}},[e._v("Новости портала")]),n("a",{staticClass:"link"},[n("svg",{staticClass:"bi bi-search",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"}})])])])},j=[],x={},C=x,S=(n("3566"),Object(f["a"])(C,y,j,!1,null,"d6c74696",null)),O=S.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.showMessage?n("div",{staticClass:"\n      message-wrapper\n      position-absolute\n      top-0\n      start-50\n      translate-middle-x\n      m-1\n    "},[n("div",{staticClass:"card text-center shadow"},[n("div",{staticClass:"card-header bg-info"},[e._v("Оповещение")]),n("div",{staticClass:"card-body"},[n("p",{staticClass:"card-text"},[e._v(" "+e._s(e.message)+" ")])])])]):e._e()])},T=[],R={computed:Object(g["c"])(["message","showMessage"]),methods:Object(g["b"])([])},E=R,P=(n("92a4"),Object(f["a"])(E,N,T,!1,null,null,null)),_=P.exports,M={components:{Login:k,Nav:O,Message:_},computed:{layout:function(){return this.$route.name}}},A=M,I=(n("034f"),Object(f["a"])(A,r,o,!1,null,null,null)),U=I.exports,L=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("8c4f"));a["a"].use(L["a"]);var z=[{path:"/",name:"Home",component:function(){return n.e("chunk-69d99c60").then(n.bind(null,"bb51"))}},{path:"/map",name:"Map",component:function(){return n.e("chunk-9f46e094").then(n.bind(null,"4bb4"))}},{path:"/about",name:"About",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-8fed80c6")]).then(n.bind(null,"f820"))}},{path:"/dashboard",name:"Dashboard",component:function(){return n.e("chunk-2ce1fe82").then(n.bind(null,"7277"))},beforeEnter:function(e,t,n){var a=JSON.parse(localStorage.getItem("YENISEI_AUTH"));if(a){var r=Number(a.role);2==r||3==r?n():n({name:"Home"})}else n({name:"Home"})}},{path:"/news",name:"News",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-24a73167")]).then(n.bind(null,"a2f9"))}},{path:"/gallery",name:"Gallery",component:function(){return n.e("chunk-00bd30ef").then(n.bind(null,"0d77"))}},{path:"/catalogs",name:"Catalogs",component:function(){return n.e("chunk-61d57874").then(n.bind(null,"f79e"))}},{path:"/second",name:"second",component:function(){return n.e("chunk-2bbe0e23").then(n.bind(null,"d2ab"))}},{path:"/test",name:"test",component:function(){return n.e("chunk-32806c68").then(n.bind(null,"78c1"))}},{path:"*",name:"404",component:function(){return n.e("chunk-2d0e95df").then(n.bind(null,"8cdb"))}}],B=new L["a"]({mode:"history",routes:z}),J=B,D=n("1cf8"),F={state:{show:!1,information:"",currentPanel:"Catalogs",sidebarMapButtons:[{name:"Каталоги",id:"Catalogs"},{name:"Подложки",id:"BaseMap"},{name:"Легенда",id:"Legend"}],baseMaps:[{name:"Стандарт",url:"https://api.maptiler.com/maps/basic/{z}/{x}/{y}.png?key=NynhVPfsQFS9p8fzpF0c"},{name:"Рельеф",url:"https://api.maptiler.com/maps/topo/{z}/{x}/{y}.png?key=NynhVPfsQFS9p8fzpF0c"},{name:"Спутник",url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=NynhVPfsQFS9p8fzpF0c"},{name:"Черно-белая",url:"https://api.maptiler.com/maps/toner/{z}/{x}/{y}.png?key=NynhVPfsQFS9p8fzpF0c"}],currentBaseMap:0},actions:{ChangeShow:function(e){e.commit("changeShow")},Open:function(e){e.commit("changeShow",!0)},Close:function(e){e.commit("changeShow",!1)},ChangeExpand:function(e){e.commit("changeExpand",!1)},ChangeTextPopup:function(e,t){e.commit("changeTextPopup",t)}},mutations:{changeShow:function(e,t){console.log(t),e.show=t},changeTextPopup:function(e,t){e.information=t},changeCurrentPanel:function(e,t){e.currentPanel=t},changeBaseMap:function(e,t){e.currentBaseMap=t}},getters:{show:function(e){return e.show},information:function(e){return e.information},currentPanel:function(e){return e.currentPanel},sidebarMapButtons:function(e){return e.sidebarMapButtons},baseMaps:function(e){return e.baseMaps},currentBaseMap:function(e){return e.currentBaseMap}}},H=n("1da1"),Y=(n("159b"),n("a434"),n("96cf"),"http://enplus.petyaogurkin.keenetic.pro/api/news/"),$="http://enplus.petyaogurkin.keenetic.pro/api/news/add",V="http://enplus.petyaogurkin.keenetic.pro/api/news/edit/",Q="http://enplus.petyaogurkin.keenetic.pro/api/news/remove/";function q(){console.log("УСПЕХ")}function G(){return Z.apply(this,arguments)}function Z(){return Z=Object(H["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(Y);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function K(e,t){return W.apply(this,arguments)}function W(){return W=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=new FormData,a.append("title",t.title),a.append("body",t.body),a.append("date",t.date),r=0;r<t.img.length;r++)a.append("img",t.img[r]);return e.next=7,fetch($,{method:"POST",body:a,headers:{Authorization:"Bearer ".concat(n)}});case 7:o=e.sent,201==o.status&&q();case 9:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function X(e,t){return ee.apply(this,arguments)}function ee(){return ee=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a=new FormData,a.append("title",t.title),a.append("body",t.body),a.append("date",t.date),r=0;r<t.img.length;r++)a.append("img",t.img[r]);return e.next=7,fetch(V+"".concat(t._id),{method:"PUT",body:a,headers:{Authorization:"Bearer ".concat(n)}});case 7:o=e.sent,200==o.status&&q();case 9:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return ne=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=fetch(Q+"".concat(t._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}}),console.log(a);case 2:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}var ae={state:{originalNews:"[]",news:[],delNews:[],selectedNews:null},actions:{fileChange:function(e,t){var n=t.target.files;console.log(n),e.commit("updateFiles",n)},AddNews:function(e){var t={title:"",body:"",date:"",img:[],action:"add"},n=e.getters.newsLength;e.commit("addNews",t),e.commit("updateSelectedNews",n)},DeleteNews:function(e,t){e.commit("updateSelectedNews",null),e.commit("deleteNews",t)},Cancel:function(e){e.commit("updateSelectedNews",null),e.commit("cancel")},FetchNews:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,G();case 2:n=t.sent,e.commit("updateNews",n);case 4:case"end":return t.stop()}}),t)})))()},SaveNews:function(e){var t=this;return Object(H["a"])(regeneratorRuntime.mark((function n(){var a,r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=JSON.parse(localStorage.getItem("YENISEI_AUTH")),r=e.state.news,o=e.state.delNews,s=!1,r.forEach((function(e){e.title&&e.body||"delete"==e.action||(s=!0)})),s&&t.dispatch("DisplayMessage","Заполните название и текст новостей перед отправкой"),s||(e.commit("updateSelectedNews",null),r.forEach((function(e){"add"==e.action&&(K(e,a.accessToken),e.action="done"),"edit"==e.action&&(X(e,a.accessToken),e.action="done")})),o.forEach((function(e){te(e,a.accessToken)})),setTimeout((function(){t.dispatch("FetchNews"),t.dispatch("DisplayMessage","Новости сохранены!")}),3e3));case 7:case"end":return n.stop()}}),n)})))()},SelectNews:function(e,t){e.commit("updateSelectedNews",t)}},mutations:{addNews:function(e,t){e.news.push(t)},deleteNews:function(e,t){"add"==e.news[t].action||e.delNews.push(e.news[t]),e.news.splice(t,1)},updateNews:function(e,t){e.originalNews=JSON.stringify(t),e.news=t},cancel:function(e){e.delNews=[],e.news=JSON.parse(e.originalNews)},updateSelectedNews:function(e,t){null!=t&&"add"!=e.news[t].action&&(e.news[t].action="edit"),e.selectedNews=t},updateFiles:function(e,t){var n=e.selectedNews;t.forEach((function(t){e.news[n].img.push(t)})),console.log(e.news)}},getters:{news:function(e){return e.news},newsLength:function(e){return e.news.length},selectedNews:function(e){return e.selectedNews}}},re=(n("ac1f"),n("466d"),[/^[A-Za-z]+$/,/[а-я-0-9]/g]),oe=[/^[А-Яа-я]+$/,/[A-Za-z-0-9]/g],se=[/^[A-Za-z-0-9]+$/,/[а-я]/g],ce={latin:re,cyr:oe,pass:se};function ie(e,t){var n=e.target.value;return e.target.value.match(ce[t][0])||(n=n.replaceAll(ce[t][1],""),e.target.value=n),n}function ue(e){var t=!0;for(var n in e)e[n]||(t=!1);return t}var le="http://enplus.petyaogurkin.keenetic.pro/api/users/",pe="http://enplus.petyaogurkin.keenetic.pro/api/users/add/",de="http://enplus.petyaogurkin.keenetic.pro/api/users/edit/",fe="http://enplus.petyaogurkin.keenetic.pro/api/users/remove/";function he(e,t){return me.apply(this,arguments)}function me(){return me=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.stringify(t),e.next=3,fetch(pe,{body:a,headers:{Authorization:"Bearer ".concat(n)}});case 3:r=e.sent,console.log(r);case 5:case"end":return e.stop()}}),e)}))),me.apply(this,arguments)}function ge(e,t){return we.apply(this,arguments)}function we(){return we=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(de+"".concat(t._id),{headers:{Authorization:"Bearer ".concat(n)}});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)}))),we.apply(this,arguments)}function be(e,t){return ve.apply(this,arguments)}function ve(){return ve=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(fe+"".concat(t._id),{headers:{Authorization:"Bearer ".concat(n)}});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)}))),ve.apply(this,arguments)}var ke={state:{users:[],delUsers:[],originalUsers:"[]",user:null,firstname:null,lastname:null,newLogin:null,newPassword:null,role:null},actions:{AddUser:function(e){var t=this;return Object(H["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={firstname:e.state.firstname,lastname:e.state.lastname,password:e.state.newPassword,login:e.state.newLogin,role:e.state.role},r=ue(a),r?e.commit("addUser",a):t.dispatch("DisplayMessage","Заполните все поля у пользователя!");case 3:case"end":return n.stop()}}),n)})))()},DeleteUser:function(e,t){return Object(H["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.commit("deleteUser",t);case 1:case"end":return n.stop()}}),n)})))()},FetchUsers:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),3!=n.role){t.next=10;break}return t.next=4,fetch(le,{headers:{Authorization:"Bearer ".concat(n.accessToken)}});case 4:return a=t.sent,t.next=7,a.json();case 7:r=t.sent,r.forEach((function(e){e.password=null,e.changePassword=!1})),e.commit("updateUsers",r);case 10:case"end":return t.stop()}}),t)})))()},SaveUsers:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n,a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),3==n.role&&(a=e.state.users,r=e.state.delUsers,a.forEach((function(e){"add"==e.action&&he(e,n.accessToken),"edit"==e.action&&ge(e,n.accessToken)})),r.forEach((function(e){be(e,n.accessToken)})));case 2:case"end":return t.stop()}}),t)})))()},CancelUsers:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.commit("cancelUsers");case 1:case"end":return t.stop()}}),t)})))()}},mutations:{addUser:function(e,t){e.users.push(t)},deleteUser:function(e,t){e.users.splice(t,1)},updateUsers:function(e,t){e.originalUsers=JSON.stringify(t),e.users=t},cancelUsers:function(e){e.users=JSON.parse(e.originalUsers)},updateFirstname:function(e,t){e.firstname=ie(t,"cyr")},updateLastname:function(e,t){e.lastname=ie(t,"cyr")},updateNewLogin:function(e,t){e.newLogin=ie(t,"latin")},updateNewPassword:function(e,t){e.newPassword=ie(t,"pass")},updateRole:function(e,t){e.role=t.target.value}},getters:{users:function(e){return e.users},firstname:function(e){return e.firstname},lastname:function(e){return e.lastname},newPassword:function(e){return e.newPassword},newLogin:function(e){return e.newLogin},role:function(e){return e.role}}},ye=n("1232"),je="http://enplus.petyaogurkin.keenetic.pro/api/auth/login/",xe="http://enplus.petyaogurkin.keenetic.pro/api/auth/logout/",Ce="http://enplus.petyaogurkin.keenetic.pro/api/auth/refresh/",Se={state:{users:[],originalUsers:"[]",user:null,login:null,password:null},actions:{Login:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o,s,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state.login,a=e.state.password,!n||!a){t.next=16;break}return r={login:n,password:a},t.next=6,fetch(je,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 6:if(o=t.sent,403==o.status&&alert("Неверный логин или пароль"),200!=o.status){t.next=16;break}return t.next=11,o.json();case 11:s=t.sent,c=Object(ye["a"])(s.accessToken),i={id:c.id,role:c.role,name:n,accessToken:s.accessToken,refreshToken:s.refreshToken},localStorage.setItem("YENISEI_AUTH",JSON.stringify(i)),e.commit("updateUser",i);case 16:case"end":return t.stop()}}),t)})))()},Logout:function(){return Object(H["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=JSON.parse(localStorage.getItem("YENISEI_AUTH")),fetch(xe,{method:"POST",headers:{Authorization:"Bearer ".concat(t.accessToken)},body:JSON.stringify(t.refreshToken)}),localStorage.removeItem("YENISEI_AUTH");case 3:case"end":return e.stop()}}),e)})))()},CheckUser:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),e.commit("updateUser",n);case 2:case"end":return t.stop()}}),t)})))()},RefreshUser:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),t.next=3,fetch(Ce,{body:n.refreshToken});case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,o=Object(ye["a"])(r.accessToken),s={id:o.id,role:o.role,accessToken:r.accessToken,refreshToken:r.refreshToken},localStorage.setItem("YENISEI_AUTH",JSON.stringify(s)),e.commit("updateUser",s);case 11:case"end":return t.stop()}}),t)})))()}},mutations:{updateLogin:function(e,t){e.login=ie(t,"latin")},updatePassword:function(e,t){e.password=ie(t,"pass")},updateUser:function(e,t){e.user=t}},getters:{user:function(e){return e.user},login:function(e){return e.login},password:function(e){return e.password}}},Oe="http://enplus.petyaogurkin.keenetic.pro/api/about/",Ne="http://enplus.petyaogurkin.keenetic.pro/api/about/edit/",Te={state:{about:null},actions:{FetchAbout:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(Oe);case 2:return n=t.sent,t.next=5,n.json();case 5:a=t.sent,e.commit("updateAbout",a);case 7:case"end":return t.stop()}}),t)})))()},EditAbout:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state.about[0].body,a=JSON.parse(localStorage.getItem("YENISEI_AUTH")),t.next=4,fetch(Ne,{method:"PUT",body:JSON.stringify({body:n}),headers:{Authorization:"Bearer ".concat(a.accessToken),"Content-Type":"application/json"}});case 4:return r=t.sent,t.next=7,r.json();case 7:o=t.sent,console.log(o);case 9:case"end":return t.stop()}}),t)})))()}},mutations:{updateAbout:function(e,t){e.about=t}},getters:{about:function(e){return e.about}}},Re=(n("d81d"),n("7db0"),n("c740"),n("41b9")),Ee="http://enplus.petyaogurkin.keenetic.pro/api/maps/",Pe="http://enplus.petyaogurkin.keenetic.pro/api/projects/",_e="http://enplus.petyaogurkin.keenetic.pro/api/projects/add",Me="http://enplus.petyaogurkin.keenetic.pro/api/projects/edit/",Ae="http://enplus.petyaogurkin.keenetic.pro/api/projects/remove/";function Ie(e){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(H["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Re["a"],a="https://qgisserver.petyaogurkin.keenetic.pro/ogc/".concat(t,"?VERSION=1.3.0&REQUEST=GetCapabilities&SERVICE=WMS"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.text();case 7:return o=e.sent,s=n.read(o),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)}))),Ue.apply(this,arguments)}function Le(e){for(var t="",n=0;n<e.Capability.Layer.Layer.length;n++)t+=e.Capability.Layer.Layer[n].Name+",";return t}function ze(e){return Be.apply(this,arguments)}function Be(){return Be=Object(H["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ee,{headers:{Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),Be.apply(this,arguments)}function Je(){return De.apply(this,arguments)}function De(){return De=Object(H["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(Pe);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),De.apply(this,arguments)}function Fe(e,t){return He.apply(this,arguments)}function He(){return He=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(_e,{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)}))),He.apply(this,arguments)}function Ye(e,t){return $e.apply(this,arguments)}function $e(){return $e=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(Me+"".concat(t._id),{method:"Edit",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)}))),$e.apply(this,arguments)}function Ve(e,t){return Qe.apply(this,arguments)}function Qe(){return Qe=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ae+"".concat(t._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)}))),Qe.apply(this,arguments)}var qe={state:{originalProjects:"[]",projects:[],delProjects:[],existingMaps:[],selectedProject:null,projectsToDisplay:[],capabilities:{}},actions:{Capabilities:function(e,t){return Object(H["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.state.capabilities[t._id],a||Ie(t.map).then((function(n){var a=Le(n);e.commit("updateCapabilities",{id:t._id,layers:a})}));case 2:case"end":return n.stop()}}),n)})))()},FetchProjects:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Je();case 2:n=t.sent,e.commit("updateProjects",n);case 4:case"end":return t.stop()}}),t)})))()},FetchMaps:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),t.next=3,ze(n.accessToken);case 3:a=t.sent,e.commit("updateExistingMaps",a);case 5:case"end":return t.stop()}}),t)})))()},UpdateProjectsToDisplay:function(e,t){e.commit("updateProjectsToDisplay",t._id),this.dispatch("Capabilities",t)},AddProject:function(e){var t={title:"",description:"",section:"",map:"",check:"",action:"add"},n=e.getters.projectsLength;console.log(n),e.commit("addProject",t),e.commit("updateSelectedProject",n)},DeleteProject:function(e,t){e.commit("updateSelectedProject",null),e.commit("deleteProject",t)},SelectProject:function(e,t){e.commit("updateSelectedProject",t)},SaveProjects:function(e){var t=JSON.parse(localStorage.getItem("YENISEI_AUTH")),n=e.state.projects,a=e.state.delProjects;n.forEach((function(e){"add"==e.action&&(Fe(e,t.accessToken),e.action="done"),"edit"==e.action&&(Ye(e,t.accessToken),e.action="done")})),a.forEach((function(e){Ve(e,t.accessToken)}))}},mutations:{updateCapabilities:function(e,t){e.capabilities[t.id]=t.layers},updateProjectsToDisplay:function(e,t){var n=e.projects.find((function(e){return e._id==t})),a=e.projectsToDisplay.findIndex((function(e){return e._id==t}));-1==a?e.projectsToDisplay.push(n):e.projectsToDisplay.splice(a,1)},updateExistingMaps:function(e,t){e.existingMaps=t},addProject:function(e,t){e.projects.push(t)},updateSelectedProject:function(e,t){null!=t&&"add"!=e.projects[t].action&&(e.projects[t].action="edit"),e.selectedProject=t},updateProjects:function(e,t){e.originalProjects=JSON.stringify(t),e.projects=t},deleteProject:function(e,t){"add"==e.projects[t].action||e.delProjects.push(e.projects[t]),e.projects.splice(t,1)}},getters:{capabilities:function(e){return e.capabilities},projectsToDisplay:function(e){return e.projectsToDisplay},existingMaps:function(e){return e.existingMaps},projectsLength:function(e){return e.projects.length},projects:function(e){return e.projects},selectedProject:function(e){return e.selectedProject}}},Ge={state:{message:null,showMessage:!1,displayTime:3e3},actions:{DisplayMessage:function(e,t){return Object(H["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.commit("updateMessage",t),e.commit("updateShowMessage",!0),setTimeout((function(){e.commit("updateMessage",""),e.commit("updateShowMessage",!1)}),e.state.displayTime);case 3:case"end":return n.stop()}}),n)})))()},DisplayMessageEver:function(e,t){return Object(H["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.commit("updateMessage",t);case 1:case"end":return n.stop()}}),n)})))()}},mutations:{updateMessage:function(e,t){e.message=t},updateShowMessage:function(e,t){e.showMessage=t}},getters:{message:function(e){return e.message},showMessage:function(e){return e.showMessage}}};function Ze(e,t){var n=e;if(n.length>0){var a=n[0],r=new FileReader;r.readAsDataURL(a),r.onload=function(e){var n=e.target.result;return t.img=n,n}}}var Ke="http://enplus.petyaogurkin.keenetic.pro/api/catalog/",We="http://enplus.petyaogurkin.keenetic.pro/api/catalog/add",Xe="http://enplus.petyaogurkin.keenetic.pro/api/catalog/edit/",et="http://enplus.petyaogurkin.keenetic.pro/api/catalog/remove/";function tt(){return nt.apply(this,arguments)}function nt(){return nt=Object(H["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(Ke);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),nt.apply(this,arguments)}function at(e,t){return rt.apply(this,arguments)}function rt(){return rt=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(We,{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)}))),rt.apply(this,arguments)}function ot(e,t){return st.apply(this,arguments)}function st(){return st=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(Xe+"".concat(t._id),{method:"Edit",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)}))),st.apply(this,arguments)}function ct(e,t){return it.apply(this,arguments)}function it(){return it=Object(H["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(et+"".concat(t._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});case 2:a=e.sent,console.log(a);case 4:case"end":return e.stop()}}),e)}))),it.apply(this,arguments)}var ut={state:{originalCatalogs:"[]",catalogs:[],delCatalogs:[],selectedCatalog:null},actions:{FetchCatalogs:function(e){return Object(H["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tt();case 2:n=t.sent,e.commit("updateCatalogs",n);case 4:case"end":return t.stop()}}),t)})))()},TestIMG:function(e,t){var n=t.target.files,a=e.state.catalogs[e.state.selectedCatalog];Ze(n,a)},AddCatalog:function(e){var t={title:"",description:"",img:[],action:"add"},n=e.getters.catalogsLength;e.commit("addCatalog",t),e.commit("updateSelectedCatalog",n)},DeleteCatalog:function(e,t){e.commit("updateSelectedCatalog",null),e.commit("deleteCatalog",t)},SelectCatalog:function(e,t){e.commit("updateSelectedCatalog",t)},SaveCatalogs:function(e){var t=JSON.parse(localStorage.getItem("YENISEI_AUTH")),n=e.state.catalogs,a=e.state.delCatalogs;n.forEach((function(e){"add"==e.action&&(console.log(123),at(e,t.accessToken),e.action="done"),"edit"==e.action&&(ot(e,t.accessToken),e.action="done")})),a.forEach((function(e){ct(e,t.accessToken)}))},CancelCatalogs:function(e){e.commit("updateSelectedCatalog",null),e.commit("cancelCatalogs")}},mutations:{cancelCatalogs:function(e){e.delCatalogs=[],e.catalogs=JSON.parse(e.originalCatalogs)},addCatalog:function(e,t){e.catalogs.push(t)},updateSelectedCatalog:function(e,t){null!=t&&"add"!=e.catalogs[t].action&&(e.catalogs[t].action="edit"),e.selectedCatalog=t},updateCatalogs:function(e,t){e.originalCatalogs=JSON.stringify(t),e.catalogs=t},deleteCatalog:function(e,t){"add"==e.catalogs[t].action||e.delCatalogs.push(e.catalogs[t]),e.catalogs.splice(t,1)}},getters:{catalogsLength:function(e){return e.catalogs.length},catalogs:function(e){return e.catalogs},selectedCatalog:function(e){return e.selectedCatalog}}};a["a"].use(g["a"]);var lt=new g["a"].Store({actions:{},mutations:{},state:{},getters:{},modules:{map:F,news:ae,users:ke,login:Se,about:Te,projects:qe,message:Ge,catalogs:ut}});n("ab8b"),n("3e48"),n("3aec");a["a"].config.productionTip=!1,a["a"].use(D["a"]),new a["a"]({router:J,store:lt,render:function(e){return e(U)}}).$mount("#app")},8487:function(e,t,n){},"85ec":function(e,t,n){},"92a4":function(e,t,n){"use strict";n("977a")},"977a":function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.03f89c0a.png"}});
//# sourceMappingURL=app.4ca51d79.js.map
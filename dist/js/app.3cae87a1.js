(function(e){function t(t){for(var r,a,c=t[0],i=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);p&&p(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o={app:0},s=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-00bd30ef":"1c4308f1","chunk-09bdd0b5":"2d33a041","chunk-1189f27b":"dc0cf638","chunk-41f16d8c":"2391a695","chunk-4c1f063f":"bddb181a","chunk-8fed80c6":"18d44f2b","chunk-48d254c4":"4b62a334","chunk-69d99c60":"1691d314","chunk-2d0d0f09":"8a196ed6","chunk-356d1148":"4a44cc42","chunk-4a5f46a6":"f127ac0b","chunk-4fb576e0":"c977bbf0","chunk-4cab860c":"64a25835","chunk-ec1bb562":"511fbb24","chunk-2d22d017":"987318b0","chunk-7c787dbe":"245cd4f6","chunk-65811608":"f48d5465"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-00bd30ef":1,"chunk-09bdd0b5":1,"chunk-1189f27b":1,"chunk-41f16d8c":1,"chunk-4c1f063f":1,"chunk-8fed80c6":1,"chunk-48d254c4":1,"chunk-69d99c60":1,"chunk-356d1148":1,"chunk-4fb576e0":1,"chunk-4cab860c":1,"chunk-7c787dbe":1,"chunk-65811608":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-00bd30ef":"cadc175a","chunk-09bdd0b5":"6064865e","chunk-1189f27b":"9746d62a","chunk-41f16d8c":"d217dcc8","chunk-4c1f063f":"83d4d307","chunk-8fed80c6":"98a0daff","chunk-48d254c4":"bf11cde2","chunk-69d99c60":"f85cf2e1","chunk-2d0d0f09":"31d6cfe0","chunk-356d1148":"07484fe0","chunk-4a5f46a6":"31d6cfe0","chunk-4fb576e0":"22d98635","chunk-4cab860c":"4fc05e03","chunk-ec1bb562":"31d6cfe0","chunk-2d22d017":"31d6cfe0","chunk-7c787dbe":"7c6470cf","chunk-65811608":"a9f7bbfa"}[e]+".css",o=i.p+r,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[e],p.parentNode.removeChild(p),n(s)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"background",attrs:{id:"app"}},[n("nav",{staticClass:"navbar main p-4"},[n("div",{staticClass:"container-fluid justify-content-center"},[n("h2",{staticClass:"text-white position-absolute m-0 p-0"},[e._v(" Картографический веб-портал Енисей плюс ")]),n("Login")],1)]),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1)},o=[],s=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-100 p-0 m-0"},[e.user?e._e():n("a",{staticClass:"link-light float-end",attrs:{"data-bs-toggle":"modal","data-bs-target":"#exampleModal"}},[n("Person")],1),e.user?n("div",{staticClass:"dropdown float-end"},[n("a",{staticClass:"link link-light dropdown-toggle p-1",attrs:{id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e._v(" "+e._s(e.user.name)+" ")]),n("ul",{staticClass:"dropdown-menu dropdown-menu-end",attrs:{"aria-labelledby":"dropdownMenuLink"}},[n("li",[n("a",{staticClass:"dropdown-item",attrs:{href:"/dashboard"}},[e._v("Редактирование материалов")]),n("a",{staticClass:"dropdown-item",attrs:{href:"/"},on:{click:e.Logout}},[e._v("Выйти")])])])]):e._e(),n("div",{ref:"Modal",staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[n("div",{ref:"Modalr",staticClass:"modal-dialog"},[n("div",{staticClass:"modal-content"},[e._m(0),n("div",{staticClass:"modal-body"},[n("div",{staticClass:"form-floating mb-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.login},on:{keypress:function(t){return e.isLetter(t)},input:function(t){t.target.composing||(e.login=t.target.value)}}}),n("label",{attrs:{for:"floatingInput"}},[e._v("Имя пользователя")])]),n("div",{staticClass:"form-floating"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.password},on:{keypress:function(t){return e.isLetter(t)},input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("label",{attrs:{for:"floatingPassword"}},[e._v("Пароль")])])]),n("div",{staticClass:"modal-footer"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[e._v(" Закрыть ")]),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.Valid}},[e._v(" Войти ")])])])])])])}),c=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._v("Вход")]),n("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])}],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-person m-0 p-0",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"}})])},u=[],l={},d=l,p=n("2877"),f=Object(p["a"])(d,i,u,!1,null,null,null),h=f.exports,m=n("2f62"),g={components:{Person:h},data:function(){return{login:null,password:null}},computed:Object(m["c"])(["user"]),mounted:function(){this.$store.dispatch("CheckUser")},methods:{Logout:function(){this.$store.dispatch("Logout")},Valid:function(){this.login&&this.password&&(this.$store.dispatch("Login",{login:this.login,password:this.password}),this.$refs.Modal.classList.toggle("show"),document.getElementsByClassName("modal-backdrop")[0].classList.toggle("show"))},isLetter:function(e){var t=String.fromCharCode(e.keyCode);if(/^[A-Za-z-0-9]+$/.test(t))return!0;e.preventDefault()}}},b=g,w=Object(p["a"])(b,s,c,!1,null,null,null),k=w.exports,y={components:{Login:k},computed:{layout:function(){return this.$route.name}}},v=y,S=(n("034f"),Object(p["a"])(v,a,o,!1,null,null,null)),O=S.exports,N=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("8c4f"));r["a"].use(N["a"]);var x=[{path:"/",name:"Home",component:function(){return n.e("chunk-69d99c60").then(n.bind(null,"bb51"))}},{path:"/map",name:"Map",component:function(){return n.e("chunk-48d254c4").then(n.bind(null,"4bb4"))}},{path:"/about",name:"About",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-8fed80c6")]).then(n.bind(null,"f820"))}},{path:"/dashboard",name:"Dashboard",component:function(){return n.e("chunk-1189f27b").then(n.bind(null,"7277"))},beforeEnter:function(e,t,n){var r=JSON.parse(localStorage.getItem("YENISEI_AUTH"));if(r){var a=Number(r.role);2==a||3==a?n():n({name:"Home"})}else n({name:"Home"})}},{path:"/news",name:"News",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-4c1f063f")]).then(n.bind(null,"a2f9"))}},{path:"/gallery",name:"Gallery",component:function(){return n.e("chunk-00bd30ef").then(n.bind(null,"0d77"))}},{path:"/resources",name:"Resources",component:function(){return n.e("chunk-09bdd0b5").then(n.bind(null,"93b9"))}}],j=new N["a"]({mode:"history",routes:x}),E=j,T=n("1cf8"),R={actions:{changeShow:function(e){e.commit("updateShow")}},mutations:{updateShow:function(e){e.show=!e.show}},state:{show:!1},getters:{getShow:function(e){return e.show}}},C=n("1da1"),_=(n("159b"),n("a434"),n("96cf"),"http://enplus.petyaogurkin.keenetic.pro/api/news/"),U="http://enplus.petyaogurkin.keenetic.pro/api/news/add",A="http://enplus.petyaogurkin.keenetic.pro/api/news/edit/",I="http://enplus.petyaogurkin.keenetic.pro/api/news/remove/";function P(){alert("Успешно!")}function L(){return J.apply(this,arguments)}function J(){return J=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(_);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}function H(e,t){return z.apply(this,arguments)}function z(){return z=Object(C["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r=new FormData,r.append("title",t.title),r.append("body",t.body),r.append("date",t.date),a=0;a<t.img.length;a++)r.append("img",t.img[a]);return e.next=7,fetch(U,{method:"POST",body:r,headers:{Authorization:"Bearer ".concat(n)}});case 7:o=e.sent,201==o.status&&P(),console.log(o);case 10:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function B(e,t){return M.apply(this,arguments)}function M(){return M=Object(C["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(console.log(t),r=new FormData,r.append("title",t.title),r.append("body",t.body),r.append("date",t.date),a=0;a<t.img.length;a++)r.append("img",t.img[a]);return e.next=8,fetch(A+"".concat(t._id),{method:"PUT",body:r,headers:{Authorization:"Bearer ".concat(n)}});case 8:o=e.sent,200==o.status&&P(),console.log(o);case 11:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function Y(e,t){return D.apply(this,arguments)}function D(){return D=Object(C["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=fetch(I+"".concat(t._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}}),console.log(r);case 2:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}var F={state:{originalNews:"[]",news:[],delNews:[],selectedNews:null},actions:{fileChange:function(e,t){var n=t.target.files;console.log(n),e.commit("updateFiles",n)},AddNews:function(e){var t={title:"",body:"",date:"",img:[],action:"add"},n=e.getters.newsLength;e.commit("addNews",t),e.commit("updateSelectedNews",n)},DeleteNews:function(e,t){e.commit("updateSelectedNews",null),e.commit("deleteNews",t)},Cancel:function(e){e.commit("updateSelectedNews",null),e.commit("cancel")},FetchNews:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:n=t.sent,e.commit("updateNews",n);case 4:case"end":return t.stop()}}),t)})))()},SaveNews:function(e){var t=this;return Object(C["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=JSON.parse(localStorage.getItem("YENISEI_AUTH")),a=e.state.news,o=e.state.delNews,s=!1,a.forEach((function(e){e.title&&e.body||"delete"==e.action||(s=!0)})),s&&alert("Заполните название и текст новостей перед отправкой"),s||(a.forEach((function(e){"add"==e.action&&(H(e,r.accessToken),e.action="done"),"edit"==e.action&&(B(e,r.accessToken),e.action="done")})),o.forEach((function(e){Y(e,r.accessToken)})),t.dispatch("FetchNews"));case 7:case"end":return n.stop()}}),n)})))()},SelectNews:function(e,t){e.commit("updateSelectedNews",t)}},mutations:{addNews:function(e,t){e.news.push(t)},deleteNews:function(e,t){"add"==e.news[t].action||e.delNews.push(e.news[t]),e.news.splice(t,1)},updateNews:function(e,t){e.originalNews=JSON.stringify(t),e.news=t},cancel:function(e){console.log(e.news),e.delNews=[],e.news=JSON.parse(e.originalNews)},updateSelectedNews:function(e,t){null!=t&&"add"!=e.news[t].action&&(e.news[t].action="edit"),e.selectedNews=t},updateFiles:function(e,t){var n=e.selectedNews;t.forEach((function(t){e.news[n].img.push(t)})),console.log(e.news)}},getters:{news:function(e){return e.news},newsLength:function(e){return e.news.length},selectedNews:function(e){return e.selectedNews}}},$="http://enplus.petyaogurkin.keenetic.pro/api/users/",W="http://enplus.petyaogurkin.keenetic.pro/api/users/add/",q="http://enplus.petyaogurkin.keenetic.pro/api/users/edit/",V="http://enplus.petyaogurkin.keenetic.pro/api/users/remove/";function G(e,t){return K.apply(this,arguments)}function K(){return K=Object(C["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.stringify(t),e.next=3,fetch(W,{body:r,headers:{Authorization:"Bearer ".concat(n)}});case 3:a=e.sent,console.log(a);case 5:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function Z(e,t){return Q.apply(this,arguments)}function Q(){return Q=Object(C["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(q+"".concat(t._id),{headers:{Authorization:"Bearer ".concat(n)}});case 2:r=e.sent,console.log(r);case 4:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function X(e,t){return ee.apply(this,arguments)}function ee(){return ee=Object(C["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(V+"".concat(t._id),{headers:{Authorization:"Bearer ".concat(n)}});case 2:r=e.sent,console.log(r);case 4:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}var te={state:{error:"",users:[],delUsers:[],originalUsers:"[]",user:null},actions:{AddUser:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.firstName&&t.lastName&&t.password&&t.role?e.commit("addUser",t):(e.commit("updateErrors","Заполните все поля у пользователя"),setTimeout((function(){e.commit("updateErrors","")}),3e3));case 1:case"end":return n.stop()}}),n)})))()},DeleteUser:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.commit("deleteUser",t);case 1:case"end":return n.stop()}}),n)})))()},FetchUsers:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),3!=n.role){t.next=10;break}return t.next=4,fetch($,{headers:{Authorization:"Bearer ".concat(n.accessToken)}});case 4:return r=t.sent,t.next=7,r.json();case 7:a=t.sent,a.forEach((function(e){e.password=null,e.changePassword=!1})),e.commit("updateUsers",a);case 10:case"end":return t.stop()}}),t)})))()},SaveUsers:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),3==n.role&&(r=e.state.users,a=e.state.delUsers,r.forEach((function(e){"add"==e.action&&G(e,n.accessToken),"edit"==e.action&&Z(e,n.accessToken)})),a.forEach((function(e){X(e,n.accessToken)})));case 2:case"end":return t.stop()}}),t)})))()},CancelUsers:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.commit("cancelUsers");case 1:case"end":return t.stop()}}),t)})))()}},mutations:{addUser:function(e,t){e.users.push(t)},deleteUser:function(e,t){e.users.splice(t,1)},updateUsers:function(e,t){e.originalUsers=JSON.stringify(t),e.users=t},updateErrors:function(e,t){e.error=t},cancelUsers:function(e){e.users=JSON.parse(e.originalUsers)}},getters:{users:function(e){return e.users},error:function(e){return e.error}}},ne=n("1232"),re="http://enplus.petyaogurkin.keenetic.pro/api/auth/login/",ae="http://enplus.petyaogurkin.keenetic.pro/api/auth/logout/",oe="http://enplus.petyaogurkin.keenetic.pro/api/auth/refresh/",se={state:{users:[],originalUsers:"[]",user:null},actions:{Login:function(e,t){return Object(C["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t,n.next=3,fetch(re,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:if(a=n.sent,403==a.status&&alert("Неверный логин или пароль"),200!=a.status){n.next=13;break}return n.next=8,a.json();case 8:o=n.sent,s=Object(ne["a"])(o.accessToken),c={id:s.id,role:s.role,name:t.login,accessToken:o.accessToken,refreshToken:o.refreshToken},localStorage.setItem("YENISEI_AUTH",JSON.stringify(c)),e.commit("updateUser",c);case 13:case"end":return n.stop()}}),n)})))()},Logout:function(){return Object(C["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=JSON.parse(localStorage.getItem("YENISEI_AUTH")),fetch(ae,{method:"POST",headers:{Authorization:"Bearer ".concat(t.accessToken)},body:JSON.stringify(t.refreshToken)}),localStorage.removeItem("YENISEI_AUTH");case 3:case"end":return e.stop()}}),e)})))()},CheckUser:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),e.commit("updateUser",n);case 2:case"end":return t.stop()}}),t)})))()},RefreshUser:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),t.next=3,fetch(oe,{body:n.refreshToken});case 3:return r=t.sent,t.next=6,r.json();case 6:a=t.sent,o=Object(ne["a"])(a.accessToken),s={id:o.id,role:o.role,accessToken:a.accessToken,refreshToken:a.refreshToken},localStorage.setItem("YENISEI_AUTH",JSON.stringify(s)),e.commit("updateUser",s);case 11:case"end":return t.stop()}}),t)})))()}},mutations:{updateUser:function(e,t){e.user=t}},getters:{user:function(e){return e.user}}},ce="http://enplus.petyaogurkin.keenetic.pro/api/about/",ie="http://enplus.petyaogurkin.keenetic.pro/api/about/edit/",ue={state:{about:null},actions:{FetchAbout:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(ce);case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,e.commit("updateAbout",r);case 7:case"end":return t.stop()}}),t)})))()},EditAbout:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state.about[0].body,r=JSON.parse(localStorage.getItem("YENISEI_AUTH")),t.next=4,fetch(ie,{method:"PUT",body:JSON.stringify({body:n}),headers:{Authorization:"Bearer ".concat(r.accessToken),"Content-Type":"application/json"}});case 4:return a=t.sent,t.next=7,a.json();case 7:o=t.sent,console.log(o);case 9:case"end":return t.stop()}}),t)})))()}},mutations:{updateAbout:function(e,t){e.about=t}},getters:{about:function(e){return e.about}}},le={state:{projects:[{title:"Новый проект",objects:[{title:"Новый объект"}]}],selectedProject:null,selectedObject:null},actions:{AddProject:function(e){var t={title:"",body:"",action:"add"};e.commit("addProject",t)},AddObject:function(e){var t={title:""};e.commit("addProject",t)}},mutations:{addProject:function(e,t){e.projects.push(t)},addObject:function(e,t){e.projects[e.selectedProject].push(t)}},getters:{projects:function(e){return e.projects}}},de=(n("cb29"),"http://enplus.petyaogurkin.keenetic.pro/api/styles/"),pe="http://enplus.petyaogurkin.keenetic.pro/api/styles/add/";function fe(){return he.apply(this,arguments)}function he(){return he=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(de);case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}function me(e,t){return ge.apply(this,arguments)}function ge(){return ge=Object(C["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("title",t.title),r.append("svg",t.svg),r.append("stroke",t.stroke),r.append("strokeType",t.strokeType),r.append("strokeWidth",t.strokeWidth),r.append("strokeOpacity",t.strokeOpacity),r.append("fill",t.fill),r.append("fillOpacity",t.fillOpacity),e.next=11,fetch(pe,{method:"POST",body:r,headers:{Authorization:"Bearer ".concat(n)}});case 11:a=e.sent,console.log(a);case 13:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}var be={state:{originalStyles:"[]",styles:[],delStyles:[],selectedStyle:null},actions:{SaveStyles:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),r=e.state.styles,a=e.state.delStyles,r.forEach((function(e){console.log(e),"add"==e.action&&(me(e,n.accessToken),e.action="done"),e.action})),a.forEach((function(e){console.log(e)}));case 5:case"end":return t.stop()}}),t)})))()},SelectStyle:function(e,t){e.commit("updateSelectedStyle",t)},FetchStyles:function(e){return Object(C["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fe();case 2:n=t.sent,e.commit("updateStyles",n);case 4:case"end":return t.stop()}}),t)})))()},AddStyle:function(e){var t={name:null,fill:"#000000",fillOpacity:null,stroke:"#000000",strokeType:"solid",strokeWidth:null,strokeOpacity:null,action:"add"};e.commit("addStyle",t)},CancelStyles:function(e){e.commit("updateSelectedStyle",null),e.commit("cancelStyles")},DeleteStyle:function(e,t){e.commit("updateSelectedStyle",null),e.commit("deleteStyle",t)}},mutations:{updateStyles:function(e,t){console.log(t),e.styles=t},updateSelectedStyle:function(e,t){e.selectedStyle=t},addStyle:function(e,t){e.styles.push(t)},deleteStyle:function(e,t){e.styles.splice(t,1)},cancelStyles:function(e){e.delStyles=[],e.styles=JSON.parse(e.originalStyles)}},getters:{selectedStyle:function(e){return e.selectedStyle},styles:function(e){return e.styles}}};r["a"].use(m["a"]);var we=new m["a"].Store({actions:{},mutations:{},state:{},getters:{},modules:{map:R,news:F,users:te,login:se,about:ue,projects:le,styles:be}});n("ab8b"),n("3e48"),n("3aec");r["a"].config.productionTip=!1,r["a"].use(T["a"]),new r["a"]({router:E,store:we,render:function(e){return e(O)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.3cae87a1.js.map
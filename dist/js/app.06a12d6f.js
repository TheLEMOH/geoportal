(function(e){function t(t){for(var a,r,s=t[0],i=t[1],u=t[2],l=0,d=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&d.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);p&&p(t);while(d.length)d.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],a=!0,r=1;r<n.length;r++){var s=n[r];0!==o[s]&&(a=!1)}a&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o={app:0},c=[];function s(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-2b47376d":"50218253","chunk-2d0e95df":"ded0bad1","chunk-3655c1d6":"b21f33cb","chunk-41f16d8c":"a60ae576","chunk-2d0c4856":"911a2490","chunk-2d670987":"ba2a0c20","chunk-5062430e":"7c2e5213","chunk-5175ed84":"b85dead0","chunk-67121f8d":"d92f9aec","chunk-4f716756":"bd431150","chunk-5d565e79":"5d0b44cb","chunk-75ab134c":"cda32d43","chunk-b7586e88":"faf7bae0"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-2b47376d":1,"chunk-3655c1d6":1,"chunk-41f16d8c":1,"chunk-2d670987":1,"chunk-5062430e":1,"chunk-5175ed84":1,"chunk-67121f8d":1,"chunk-4f716756":1,"chunk-5d565e79":1,"chunk-75ab134c":1,"chunk-b7586e88":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-2b47376d":"017dd06a","chunk-2d0e95df":"31d6cfe0","chunk-3655c1d6":"39d5190b","chunk-41f16d8c":"5972dbfc","chunk-2d0c4856":"31d6cfe0","chunk-2d670987":"e019ca43","chunk-5062430e":"76686e6c","chunk-5175ed84":"2eeaed88","chunk-67121f8d":"2ae91d84","chunk-4f716756":"79be8c8c","chunk-5d565e79":"b3fe27dd","chunk-75ab134c":"d831be68","chunk-b7586e88":"ae021925"}[e]+".css",o=i.p+a,c=document.getElementsByTagName("link"),s=0;s<c.length;s++){var u=c[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===a||l===o))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],l=u.getAttribute("data-href");if(l===a||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=a,delete r[e],p.parentNode.removeChild(p),n(c)},p.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){r[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var c=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=c);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=s(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",d.name="ChunkLoadError",d.type=a,d.request=r,n[1](d)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"3c20":function(e,t,n){"use strict";n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return T}));var a="",r=a+"/api/news/",o=a+"/api/news/add/",c=a+"/api/news/edit/",s=a+"/api/news/remove/",i=a+"/api/gallery/",u=a+"/api/gallery/add",l=a+"/api/gallery/remove/",d=a+"/api/projects/",p=a+"/api/projects/add",f=a+"/api/projects/edit/",m=a+"/api/projects/remove/",g=a+"/api/sections/",h=a+"/api/sections/add",w=a+"/api/sections/edit/",v=a+"/api/sections/remove/",b=a+"/api/articles/",y=a+"/api/articles/add/",C=a+"/api/articles/edit/",j=a+"/api/articles/remove/",L=a+"/api/users/",S=a+"/api/users/add/",k=a+"/api/users/edit/",I=a+"/api/users/remove/",O=a+"/api/maps/",x=a+"/api/about/",N=a+"/api/about/edit/",A=a+"/api/carousel/",P=a+"/api/carousel/edit/",T={news:a+"/api/images/news/",gallery:a+"/api/images/gallery/",catalogs:a+"/api/images/sections/",articles:a+"/api/images/articles/",maps:a+"/api/images/maps/"},M={news:{get:r,add:o,edit:c,remove:s},gallery:{get:i,add:u,remove:l},projects:{get:d,add:p,edit:f,remove:m},catalogs:{get:g,add:h,edit:w,remove:v},articles:{get:b,add:y,edit:C,remove:j},maps:{get:O},users:{get:L,add:S,edit:k,remove:I},about:{get:x,edit:N},carousel:{get:A,edit:P}}},5676:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar main border-bottom"},[n("div",{staticClass:"container-fluid"},[e._m(0),n("div",{staticClass:"me-auto p-2 text-white"},[n("router-link",{staticClass:"link-main-nav text-white h2",attrs:{to:{name:"Home"}}},[n("label",{staticClass:"navbar-home-name"},[e._v("Картографический веб-портал Енисей плюс")]),n("label",{staticClass:"navbar-home-name-second"},[e._v("Енисей плюс")])])],1),n("LoginDropbutton")],1)]),n("Message"),n("Nav"),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"p-0"},[a("img",{attrs:{src:n("9b19"),height:"60px",width:"60px"}})])}],c=n("5530"),s=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",{staticClass:"nav justify-content-evenly align-items-center fs-4 border shadow",staticStyle:{"z-index":"2","min-height":"50px"}},e._l(e.links,(function(t,a){return n("router-link",{key:a,staticClass:"link m-0 p-1",attrs:{to:{name:t.to}}},[n("span",{staticClass:"nav-collapse me-2"},[e._v(e._s(t.title))]),n(t.icon,{tag:"component",attrs:{data:{w:25,h:25}}})],1)})),1)}),i=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-geo-alt-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.data.w,height:e.data.h,fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"}})])},l=[],d={props:["data"]},p=d,f=n("2877"),m=Object(f["a"])(p,u,l,!1,null,null,null),g=m.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-stack",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.data.w,height:e.data.h,fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.598.598 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.598.598 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.598.598 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535L7.733.063z"}}),n("path",{attrs:{d:"m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.598.598 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.659z"}})])},w=[],v={props:["data"]},b=v,y=Object(f["a"])(b,h,w,!1,null,null,null),C=y.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-image-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.data.w,height:e.data.h,fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M.002 3a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-12a2 2 0 0 1-2-2V3zm1 9v1a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V9.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12zm5-6.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0z"}})])},L=[],S={props:["data"]},k=S,I=Object(f["a"])(k,j,L,!1,null,null,null),O=I.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-calendar2-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.data.w,height:e.data.h,fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M4 .5a.5.5 0 0 0-1 0V1H2a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-1V.5a.5.5 0 0 0-1 0V1H4V.5zM2.545 3h10.91c.3 0 .545.224.545.5v1c0 .276-.244.5-.546.5H2.545C2.245 5 2 4.776 2 4.5v-1c0-.276.244-.5.545-.5z"}})])},N=[],A={props:["data"]},P=A,T=Object(f["a"])(P,x,N,!1,null,null,null),M=T.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"bi bi-info-square-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.data.w,height:e.data.h,fill:"currentColor",viewBox:"0 0 16 16"}},[n("path",{attrs:{d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm8.93 4.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}})])},E=[],D={props:["data"]},U=D,_=Object(f["a"])(U,R,E,!1,null,null,null),B=_.exports,F={data:function(){return{links:[{title:"Картографические материалы",to:"Map",icon:"MarkerIcon"},{title:"Каталог ресурсов",to:"Catalogs",icon:"LayersMarker"},{title:"О проекте",to:"About",icon:"InfoIcon"},{title:"Фотогалерея",to:"Gallery",icon:"ImageIcon"},{title:"Новости портала",to:"News",icon:"NewsIcon"}]}},components:{MarkerIcon:g,LayersMarker:C,ImageIcon:O,NewsIcon:M,InfoIcon:B}},z=F,J=(n("8c4a"),Object(f["a"])(z,s,i,!1,null,"68937882",null)),H=J.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"\n    message-wrapper\n    position-absolute\n    top-0\n    start-50\n    translate-middle-x\n    m-1\n  "},[n("transition-group",{staticClass:"d-flex flex-row",attrs:{name:"list"}},e._l(e.messages,(function(t){return n("div",{key:t.id,staticClass:"card text-center shadow m-2"},[n("div",{staticClass:"card-header bg-info"},[e._v("Оповещение")]),n("div",{staticClass:"card-body"},[n("p",{staticClass:"card-text text-center"},[e._v(e._s(t.text))])])])})),0)],1)},$=[],G=n("2f62"),V={computed:Object(G["c"])(["messages"]),methods:Object(G["b"])([])},q=V,Q=(n("92a4"),Object(f["a"])(q,Y,$,!1,null,null,null)),Z=Q.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.user?n("button",{staticClass:"btn dropdown fs-4"},[n("a",{staticClass:"link link-light dropdown-toggle",attrs:{id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e._v(" "+e._s(e.user.name)+" ")]),n("ul",{staticClass:"dropdown-menu dropdown-menu-end"},[n("li",[n("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"Dashboard"}}},[e._v("Редактирование материалов")]),n("a",{staticClass:"dropdown-item",attrs:{href:"/"},on:{click:e.Logout}},[e._v("Выйти")])],1)])]):e._e()},K=[],X={computed:Object(G["c"])(["user"]),methods:Object(c["a"])({},Object(G["b"])(["CheckUser","Logout","DisplayMessage","UpdateShowLoginModal"]))},ee=X,te=Object(f["a"])(ee,W,K,!1,null,null,null),ne=te.exports,ae={components:{Nav:H,Message:Z,LoginDropbutton:ne},methods:Object(c["a"])({},Object(G["b"])(["CheckUser"])),computed:{layout:function(){return this.$route.name}},mounted:function(){console.log("Проверка пользователя..."),this.CheckUser()}},re=ae,oe=(n("034f"),Object(f["a"])(re,r,o,!1,null,null,null)),ce=oe.exports,se=(n("d3b7"),n("3ca3"),n("ddb0"),n("a9e3"),n("8c4f"));a["a"].use(se["a"]);var ie=[{path:"/",name:"Home",component:function(){return n.e("chunk-b7586e88").then(n.bind(null,"bb51"))}},{path:"/map",name:"Map",component:function(){return n.e("chunk-75ab134c").then(n.bind(null,"4bb4"))}},{path:"/about",name:"About",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-2d670987")]).then(n.bind(null,"f820"))}},{path:"/dashboard",name:"Dashboard",component:function(){return n.e("chunk-4f716756").then(n.bind(null,"7277"))},beforeEnter:function(e,t,n){var a=JSON.parse(localStorage.getItem("YENISEI_AUTH"));if(a){var r=Number(a.role);2==r||3==r?n():n({name:"Home"})}else n({name:"Home"})}},{path:"/news",name:"News",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-67121f8d")]).then(n.bind(null,"a2f9"))}},{path:"/gallery",name:"Gallery",component:function(){return n.e("chunk-3655c1d6").then(n.bind(null,"0d77"))}},{path:"/catalogs",name:"Catalogs",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-5062430e")]).then(n.bind(null,"f79e"))}},{path:"/catalogs/:id",name:"CatalogsChildren",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-5175ed84")]).then(n.bind(null,"fce2"))}},{path:"*",name:"404",component:function(){return n.e("chunk-2d0e95df").then(n.bind(null,"8cdb"))}},{path:"/article/:id",name:"Article",component:function(){return Promise.all([n.e("chunk-41f16d8c"),n.e("chunk-2d0c4856")]).then(n.bind(null,"3ad6"))}},{path:"/login",name:"Login",component:function(){return n.e("chunk-2b47376d").then(n.bind(null,"a55b"))}},{path:"/test",name:"Test",component:function(){return n.e("chunk-5d565e79").then(n.bind(null,"78c1"))}}],ue=new se["a"]({mode:"history",routes:ie}),le=ue,de=n("1cf8"),pe=n("256f"),fe={state:{show:!1,information:null,currentPanel:"Catalogs",baseMaps:[{name:"OSM",url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"},{name:"Стандарт",url:"https://api.maptiler.com/maps/basic/{z}/{x}/{y}.png?key=NynhVPfsQFS9p8fzpF0c"},{name:"Рельеф",url:"https://api.maptiler.com/maps/topo/{z}/{x}/{y}.png?key=NynhVPfsQFS9p8fzpF0c"},{name:"Спутник",url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=NynhVPfsQFS9p8fzpF0c"}],currentBaseMap:0,zoom:7,center:[10382902.767976305,7403254.003900477],currentPosition:void 0},actions:{ChangeShow:function(e){e.commit("changeShow")},ChangeTextPopup:function(e,t){e.commit("changeTextPopup",t)},ChangeInformation:function(e,t){t.features&&e.commit("changeInformation",t)},UpdateCenter:function(e,t){var n=Object(pe["k"])([Number(t[0]),Number(t[1])],"EPSG:4326","EPSG:3857");e.commit("updateCenter",n)}},mutations:{updateCenter:function(e,t){e.center=t},updateZoom:function(e,t){e.zoom=t},changeShow:function(e,t){e.show=t},changeTextPopup:function(e,t){e.information=t},changeCurrentPanel:function(e,t){e.currentPanel=t},changeBaseMap:function(e,t){e.currentBaseMap=t},changeCurrentPosition:function(e,t){e.currentPosition=t},changeInformation:function(e,t){e.information=t}},getters:{zoom:function(e){return e.zoom},center:function(e){return e.center},currentPosition:function(e){return e.currentPosition},show:function(e){return e.show},information:function(e){return e.information},currentPanel:function(e){return e.currentPanel},sidebarMapButtons:function(e){return e.sidebarMapButtons},baseMaps:function(e){return e.baseMaps},currentBaseMap:function(e){return e.currentBaseMap}}},me=n("1da1");n("159b"),n("a434"),n("96cf");function ge(e,t){var n=e;if(n.length>0){var a=n[0],r=new FileReader;r.readAsDataURL(a),r.onload=function(e){var n=e.target.result;return t.img=n,n}}}function he(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(){t(a.result)},a.onerror=n,a.readAsDataURL(e)}))}var we=n("53ca"),ve=(n("99af"),n("ac1f"),n("466d"),[/^[A-Za-z]+$/,/[а-я-А-Я-0-9-.,@#!$%^&*;:{}=\-_`~()/\\]/g]),be=[/^[а-я-А-Я]+$/,/[A-Za-z-0-9-.,@#!$%^&*;:{}=\-_`~()/\\]/g],ye=[/^[A-Za-z-0-9-@.,#!$%^&*;:{}=\-_`~()/\\]+$/,/[а-я-А-Я]/g],Ce={latin:ve,cyr:be,pass:ye};function je(e,t){var n=e.target.value;return n?e.target.value.match(Ce[t][0])?(e.target.classList.remove("is-invalid"),n):(n=n.replaceAll(Ce[t][1],""),e.target.classList.add("is-invalid"),e.target.value=n,n):null}function Le(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length,a=!0;if(t){for(var r=0;r<n;r++)if(a*=ke(e[r]),!a){a=!1;break}}else for(var o=0;o<n;o++)if(a*=Se(e[o]),!a){a=!1;break}return a}function Se(e){var t=!0;for(var n in e)if((""===e[n]||!e[n])&&"__v"!=n){console.log(n,e[n]),t=!1;break}return t}function ke(e){return!!e.firstName&&(!!e.lastName&&(!!e.login&&!(e.changePassword&&!e.password)))}var Ie=n("1232"),Oe="/api/auth/login/",xe="/api/auth/refresh/";function Ne(e){return Ae.apply(this,arguments)}function Ae(){return Ae=Object(me["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(Oe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(e.ok)return e.json();var t=new Error(e.statusText);throw t.response=e,t})).catch((function(e){return console.log(e),{error:!0,text:e}})));case 1:case"end":return e.stop()}}),e)}))),Ae.apply(this,arguments)}function Pe(e){return Te.apply(this,arguments)}function Te(){return Te=Object(me["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),n&&(a=fetch(xe,{method:"POST",body:JSON.stringify({refreshToken:n.refreshToken}),headers:{"Content-Type":"application/json"}}),a.then((function(e){if(!e.ok){var a=new Error(e.statusText);throw a.response=e,a}e.json().then((function(e){var a=Object(Ie["a"])(e.accessToken),r={id:a.id,role:a.role,name:n.name,accessToken:e.accessToken,refreshToken:e.refreshToken};localStorage.setItem("YENISEI_AUTH",JSON.stringify(r)),t.commit("updateUser",r)}))})).catch((function(e){le.push("/"),localStorage.removeItem("YENISEI_AUTH"),t.dispatch("DisplayMessage","login ".concat(e))})));case 2:case"end":return e.stop()}}),e)}))),Te.apply(this,arguments)}var Me=n("3c20");function Re(e,t){return Ee.apply(this,arguments)}function Ee(){return Ee=Object(me["a"])(regeneratorRuntime.mark((function e(t,n){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,fetch(Me["a"][t].get,{headers:{Authorization:"Bearer ".concat(n)}});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.next=9,fetch(Me["a"][t].get);case 9:return r=e.sent,e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}function De(e,t){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(me["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(Me["a"][n].get+"".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)}))),Ue.apply(this,arguments)}function _e(e,t,n){return Be.apply(this,arguments)}function Be(){return Be=Object(me["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=fetch(Me["a"][n].add,{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),Be.apply(this,arguments)}function Fe(e,t,n){return ze.apply(this,arguments)}function ze(){return ze=Object(me["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=fetch(Me["a"][n].edit+"".concat(t._id),{method:"PUT",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}}),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function Je(e,t,n){return He.apply(this,arguments)}function He(){return He=Object(me["a"])(regeneratorRuntime.mark((function e(t,n,a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=fetch(Me["a"][n].remove+"".concat(t._id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)}))),He.apply(this,arguments)}var Ye={add:_e,edit:Fe,delete:Je};function $e(e,t){return Ge.apply(this,arguments)}function Ge(){return Ge=Object(me["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.loaded||Re(n.type,n.token).then((function(e){if(!e.ok){var a=new Error(e.statusText);throw a.response=e,a}e.json().then((function(e){n.funcClearDel&&t.commit(n.funcClearDel),t.commit(n.funcLoaded,!0),t.commit(n.funcUpdate,e)}))})).catch((function(e){t.dispatch("DisplayMessage","".concat(n.type," ").concat(e))}));case 1:case"end":return e.stop()}}),e)}))),Ge.apply(this,arguments)}function Ve(e,t){De(t.id,t.type).then((function(n){if(!n.ok){var a=new Error(n.statusText);throw a.response=n,a}n.json().then((function(n){t.funcLoaded&&e.commit(t.funcLoaded,!0),e.commit(t.funcUpdate,n)}))})).catch((function(n){e.dispatch("DisplayMessage","".concat(t.type," ").concat(n))}))}function qe(e,t,n,a){return new Promise((function(r,o){t(e,n,a).then((function(t){t.ok?("object"==Object(we["a"])(e)&&(e.action="done"),r(t)):o(t)}))}))}function Qe(e,t,n,a){var r=[];return e.forEach((function(e){e.action&&(r.push(qe(e,Ye[e.action],n,a)),e.action="loading")})),t.forEach((function(e){r.push(qe(e,Ye["delete"],n,a))})),r}function Ze(e,t){var n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),a=t.forSave,r=t.forDelete,o="users"==t.type,c=Le(a,o);if(c){t.updateSelected&&e.commit(t.updateSelected,null),t.updateLoaded&&e.commit(t.updateLoaded,!1),e.dispatch("DisplayMessage","Сохранение...");var s=Qe(a,r,t.type,n.accessToken);Promise.all(s).then((function(){e.dispatch("DisplayMessage","Готово!"),setTimeout((function(){return e.dispatch(t.fetch)}),1e3)}),(function(n){"401"==n?(console.log("Истекло действие ключа"),Pe().then((function(){e.dispatch(t.save)}))):(e.dispatch("DisplayMessage",n.statusText),e.dispatch(t.fetch))}))}else e.dispatch("DisplayMessage",t.nonFilled)}var We={state:{originalNews:"[]",news:[],delNews:[],newsLoaded:!1,selectedNews:null},actions:{FetchNews:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.newsLoaded,type:"news",funcClearDel:"clearDelNews",funcLoaded:"updateNewsLoaded",funcUpdate:"updateNews"},$e(e,n);case 2:case"end":return t.stop()}}),t)})))()},SaveNews:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={type:"news",forSave:e.state.news,forDelete:e.state.delNews,updateSelected:"updateSelectedNews",updateLoaded:"updateNewsLoaded",fetch:"FetchNews",save:"SaveNews",nonFilled:"Заполните все поля у новости!"},Ze(e,n);case 2:case"end":return t.stop()}}),t)})))()},TestImgNews:function(e,t){return Object(me["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t.target.files,a.forEach((function(t){var n=he(t);n.then((function(t){e.commit("addImageNews",t)}))}));case 2:case"end":return n.stop()}}),n)})))()},DeleteImageFromNews:function(e,t){e.commit("deleteImageFromNews",t)},AddNews:function(e){var t={title:null,body:null,date:"00.00.00",imgBase:[],action:"add"},n=e.getters.newsLength;e.commit("addNews",t),e.commit("updateSelectedNews",n)},DeleteNews:function(e,t){e.commit("updateSelectedNews",null),e.commit("deleteNews",t)},Cancel:function(e){e.commit("updateSelectedNews",null),e.commit("cancel")},SelectNews:function(e,t){e.commit("updateSelectedNews",t)}},mutations:{deleteImageFromNews:function(e,t){var n=e.selectedNews,a=t.index,r=t.array;e.news[n].imgOld||(e.news[n].imgOld=[]),e.news[n].img&&"base"!=r&&(e.news[n].imgOld.push(e.news[n].img[a]),e.news[n].img.splice(a,1)),"base"==r&&e.news[n].imgBase.splice(a,1)},addImageNews:function(e,t){e.news[e.selectedNews].imgBase||a["a"].set(e.news[e.selectedNews],"imgBase",[]),e.news[e.selectedNews].imgBase.push(t)},addNews:function(e,t){e.news.push(t)},deleteNews:function(e,t){"add"==e.news[t].action||e.delNews.push(e.news[t]),e.news.splice(t,1)},updateNews:function(e,t){e.originalNews=JSON.stringify(t),e.news=t},clearDelNews:function(e){e.delNews=[]},cancel:function(e){e.delNews=[],e.news=JSON.parse(e.originalNews)},updateSelectedNews:function(e,t){null!=t&&"add"!=e.news[t].action&&(e.news[t].action="edit"),e.selectedNews=t},updateNewsLoaded:function(e,t){e.newsLoaded=t}},getters:{news:function(e){return e.news},newsLength:function(e){return e.news.length},selectedNews:function(e){return e.selectedNews},newsLoaded:function(e){return e.newsLoaded}}},Ke={state:{users:[],delUsers:[],originalUsers:"[]",user:null,firstName:null,lastName:null,newLogin:null,newPassword:null,role:null,usersLoaded:!1},actions:{AddUser:function(e){var t=this;return Object(me["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={firstName:e.state.firstName,lastName:e.state.lastName,password:e.state.newPassword,login:e.state.newLogin,role:e.state.role,action:"add"},r=Se(a),r?e.commit("addUser",a):t.dispatch("DisplayMessage","Заполните все поля у пользователя!");case 3:case"end":return n.stop()}}),n)})))()},DeleteUser:function(e,t){var n=this;return Object(me["a"])(regeneratorRuntime.mark((function a(){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=JSON.parse(localStorage.getItem("YENISEI_AUTH")).id,o=e.state.users[t]._id==r,o?n.dispatch("DisplayMessage","Нельзя удалить себя"):e.commit("deleteUser",t);case 3:case"end":return a.stop()}}),a)})))()},FetchUsers:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),a={loaded:e.state.usersLoaded,type:"users",token:n.accessToken,funcClearDel:"clearDelUsers",funcLoaded:"updateUsersLoaded",funcUpdate:"updateUsers"},$e(e,a);case 3:case"end":return t.stop()}}),t)})))()},SaveUsers:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={forSave:e.state.users,forDelete:e.state.delUsers,updateSelected:null,updateLoaded:"updateUsersLoaded",type:"users",fetch:"FetchUsers",save:"SaveUsers",nonFilled:"Заполните все поля у пользователя!"},Ze(e,n);case 2:case"end":return t.stop()}}),t)})))()},CancelUsers:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.commit("cancelUsers");case 1:case"end":return t.stop()}}),t)})))()},UpdateField:function(e,t){e.commit("updateField",t)}},mutations:{addUser:function(e,t){e.users.push(t)},deleteUser:function(e,t){"add"==e.users[t].action||e.delUsers.push(e.users[t]),e.users.splice(t,1)},updateUsers:function(e,t){t.forEach((function(e){e.changePassword=!1,e.password=null})),e.originalUsers=JSON.stringify(t),e.users=t},cancelUsers:function(e){e.delUsers=[],e.users=JSON.parse(e.originalUsers)},updateFirstname:function(e,t){e.firstName=je(t,"cyr")},updateLastname:function(e,t){e.lastName=je(t,"cyr")},updateNewLogin:function(e,t){e.newLogin=je(t,"latin")},updateNewPassword:function(e,t){e.newPassword=je(t,"pass")},updateField:function(e,t){"add"!=e.users[t.index].action&&(e.users[t.index].action="edit"),"firstName"==t.field&&(e.users[t.index][t.field]=je(t.event,"cyr")),"lastName"==t.field&&(e.users[t.index][t.field]=je(t.event,"cyr")),"login"==t.field&&(e.users[t.index][t.field]=je(t.event,"latin")),"password"==t.field&&(e.users[t.index][t.field]=je(t.event,"pass")),"role"==t.field&&a["a"].set(e.users[t.index],t.field,t.event.target.value),"changePassword"==t.field&&(a["a"].set(e.users[t.index],t.field,t.event.target.checked),e.users[t.index].password=null)},updateRole:function(e,t){e.role=t.target.value},updateUsersLoaded:function(e,t){e.usersLoaded=t},clearDelUsers:function(e){e.delUsers=[]}},getters:{users:function(e){return e.users},firstname:function(e){return e.firstName},lastname:function(e){return e.lastName},newPassword:function(e){return e.newPassword},newLogin:function(e){return e.newLogin},role:function(e){return e.role},usersLoaded:function(e){return e.usersLoaded}}},Xe="/api/auth/logout/",et={state:{user:null,login:null,password:null,showLoginModal:!1},actions:{Login:function(e){var t=this;return Object(me["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={login:e.state.login,password:e.state.password},r=Se(a),r&&(t.dispatch("DisplayMessage","Вход..."),Ne(a).then((function(n){if(1!=n.error){var r=Object(Ie["a"])(n.accessToken),o={id:r.id,role:r.role,name:a.login,accessToken:n.accessToken,refreshToken:n.refreshToken};t.dispatch("DisplayMessage","Успешно!"),t.dispatch("UpdateShowLoginModal",!1),localStorage.setItem("YENISEI_AUTH",JSON.stringify(o)),e.commit("updateUser",o)}else t.dispatch("DisplayMessage",n.text)})));case 3:case"end":return n.stop()}}),n)})))()},Logout:function(){return Object(me["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=JSON.parse(localStorage.getItem("YENISEI_AUTH")),fetch(Xe,{method:"POST",headers:{Authorization:"Bearer ".concat(t.accessToken)},body:JSON.stringify(t.refreshToken)}),localStorage.removeItem("YENISEI_AUTH");case 3:case"end":return e.stop()}}),e)})))()},CheckUser:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Pe(e);case 1:case"end":return t.stop()}}),t)})))()},RefreshUser:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Pe(e);case 1:case"end":return t.stop()}}),t)})))()},UpdateShowLoginModal:function(e,t){e.commit("updateShowLoginModal",t)}},mutations:{updateLogin:function(e,t){e.login=je(t,"latin")},updatePassword:function(e,t){e.password=je(t,"pass")},updateUser:function(e,t){e.user=t},updateShowLoginModal:function(e,t){e.showLoginModal=t}},getters:{user:function(e){return e.user},login:function(e){return e.login},password:function(e){return e.password},showLoginModal:function(e){return e.showLoginModal}}},tt={state:{about:null,aboutLoaded:!1},actions:{FetchAbout:function(e){var t=this;return Object(me["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:fetch(Me["a"].about.get).then((function(t){t.json().then((function(t){e.commit("updateAboutLoaded",!0),e.commit("updateAbout",t)}))})).catch((function(e){t.dispatch("DisplayMessage","about ".concat(e))}));case 1:case"end":return n.stop()}}),n)})))()},EditAbout:function(e){var t=this;return Object(me["a"])(regeneratorRuntime.mark((function n(){var a,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit("updateAboutLoaded",!1),t.dispatch("DisplayMessage","Сохранение..."),a=e.state.about[0].body,r=JSON.parse(localStorage.getItem("YENISEI_AUTH")),n.next=6,fetch(Me["a"].about.edit,{method:"PUT",body:JSON.stringify({body:a}),headers:{Authorization:"Bearer ".concat(r.accessToken),"Content-Type":"application/json"}});case 6:o=n.sent,o.json().then((function(n){e.commit("updateAboutLoaded",!0),t.dispatch("DisplayMessage","Успешно! ".concat(n.message))}));case 8:case"end":return n.stop()}}),n)})))()}},mutations:{updateAbout:function(e,t){e.about=t},updateAboutLoaded:function(e,t){e.aboutLoaded=t}},getters:{about:function(e){return e.about},aboutLoaded:function(e){return e.aboutLoaded}}},nt=(n("d81d"),n("c740"),n("41b9")),at={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png",SYMBOLWIDTH:10,SYMBOLHEIGHT:5,LAYERSPACE:1,LAYERTITLESPACE:1,ICONLABELSPACE:1,LAYERTITLE:!1,RULELABEL:!0,TRANSPARENT:!0,ITEMFONTCOLOR:"white",ITEMFONTSIZE:"12"};function rt(e){return ot.apply(this,arguments)}function ot(){return ot=Object(me["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new nt["a"],a="https://yenisey.sfu-kras.ru/qgisserver/".concat(t,"?VERSION=1.3.0&REQUEST=GetCapabilities&SERVICE=WMS"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.text();case 7:return o=e.sent,c=n.read(o),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)}))),ot.apply(this,arguments)}function ct(e){for(var t="",n=0;n<e.Capability.Layer.Layer.length;n++)t+=e.Capability.Layer.Layer[n].Name+",";return t}function st(e){return e.Capability.Layer.EX_GeographicBoundingBox}function it(e){var t=(e[0]+e[2])/2,n=(e[1]+e[3])/2;return[t,n]}var ut={state:{originalProjects:"[]",projects:[],delProjects:[],existingMaps:[],selectedProject:null,projectsLoaded:!1,mapsLoaded:!1,projectsToDisplay:[],openedProject:null,capabilities:{},legend:[]},actions:{FetchProjects:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.projectsLoaded,type:"projects",funcClearDel:"clearDelProjects",funcLoaded:"updateProjectsLoaded",funcUpdate:"updateProjects"},$e(e,n);case 2:case"end":return t.stop()}}),t)})))()},SaveProjects:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={forSave:e.state.projects,forDelete:e.state.delProjects,updateSelected:"updateSelectedProject",updateLoaded:"updateProjectsLoaded",type:"projects",fetch:"FetchProjects",save:"SaveProjects",nonFilled:"Заполните все поля у проекта!"},Ze(e,n);case 2:case"end":return t.stop()}}),t)})))()},Capabilities:function(e,t){var n=this;return Object(me["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=t.legend,r||rt(t.map).then((function(n){var a=ct(n),r=st(n),o=it(r),c="";for(var s in at)c+="".concat(s,"=").concat(at[s],"&");var i="https://yenisey.sfu-kras.ru/qgisserver/".concat(t.map,"?").concat(c,"LAYERS=").concat(a);e.commit("updateCapabilities",{id:t._id,legend:i,layers:a,center:o})})).catch((function(e){n.dispatch("DisplayMessage","Ошибка загрузки карты ".concat(e))}));case 2:case"end":return a.stop()}}),a)})))()},FetchMaps:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=JSON.parse(localStorage.getItem("YENISEI_AUTH")),a={loaded:e.state.mapsLoaded,type:"maps",token:n.accessToken,funcClearDel:null,funcLoaded:"updateMapsLoaded",funcUpdate:"updateExistingMaps"},$e(e,a);case 3:case"end":return t.stop()}}),t)})))()},UpdateProjectsToDisplay:function(e,t){e.commit("updateProjectsToDisplay",t._id),t.visible&&this.dispatch("Capabilities",t)},AddProject:function(e){var t={title:null,description:null,section:null,map:null,action:"add"},n=e.getters.projectsLength;e.commit("addProject",t),e.commit("updateSelectedProject",n)},DeleteProject:function(e,t){e.commit("updateSelectedProject",null),e.commit("deleteProject",t)},SelectProject:function(e,t){e.commit("updateSelectedProject",t)},CancelProjects:function(e){e.commit("updateSelectedProject",null),e.commit("cancelProjects")},OpenProject:function(e){var t=e.state.openedProject;if(t){var n=document.getElementById("collapseCatalog"+t.parent),a=document.getElementById("input-project"+t.id);n&&(n.classList.add("show"),a.dispatchEvent(new Event("change")),e.commit("updateOpenedProject",null))}},UpdateOpenedProject:function(e,t){e.commit("updateOpenedProject",t)}},mutations:{updateOpenedProject:function(e,t){e.openedProject=t},clearDelProjects:function(e){e.delProjects=[]},updateProjectsLoaded:function(e,t){e.projectsLoaded=t},updateLegend:function(e,t){e.legend.push(t)},updateCapabilities:function(e,t){var n=e.projectsToDisplay.findIndex((function(e){return e._id==t.id}));a["a"].set(e.projectsToDisplay[n],"legend",t.legend),a["a"].set(e.projectsToDisplay[n],"layers",t.layers),a["a"].set(e.projectsToDisplay[n],"center",t.center)},cancelProjects:function(e){e.delProjects=[],e.projects=JSON.parse(e.originalProjects)},updateProjectsToDisplay:function(e,t){var n=e.projectsToDisplay.findIndex((function(e){return e._id==t}));a["a"].set(e.projectsToDisplay[n],"visible",!e.projectsToDisplay[n].visible)},clearProjectsToDisplay:function(e){e.projectsToDisplay=[]},updateExistingMaps:function(e,t){e.existingMaps=t},addProject:function(e,t){e.projects.push(t)},updateSelectedProject:function(e,t){null!=t&&"add"!=e.projects[t].action&&(e.projects[t].action="edit"),e.selectedProject=t},updateProjects:function(e,t){e.originalProjects=JSON.stringify(t),e.projects=t,e.projectsToDisplay=[],t.forEach((function(t){var n={title:t.title,_id:t._id,map:t.map,visible:!1,loaded:!0,section:t.section};e.projectsToDisplay.push(n)}))},deleteProject:function(e,t){"add"==e.projects[t].action||e.delProjects.push(e.projects[t]),e.projects.splice(t,1)},updateMapsLoaded:function(e,t){e.mapsLoaded=t}},getters:{legend:function(e){return e.legend},capabilities:function(e){return e.capabilities},projectsToDisplay:function(e){return e.projectsToDisplay},existingMaps:function(e){return e.existingMaps},projectsLength:function(e){return e.projects.length},projects:function(e){return e.projects},selectedProject:function(e){return e.selectedProject},projectsLoaded:function(e){return e.projectsLoaded}}},lt={state:{messages:[],showMessage:[],displayTime:2500},actions:{DisplayMessage:function(e,t){return Object(me["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=(new Date).getTime(),e.commit("updateMessage",{text:t,id:a}),setTimeout((function(){e.commit("closeMessage",a)}),e.state.displayTime);case 3:case"end":return n.stop()}}),n)})))()},DisplayMessageEver:function(e,t){return Object(me["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.commit("updateMessage",t);case 1:case"end":return n.stop()}}),n)})))()}},mutations:{updateMessage:function(e,t){e.messages.push(t)},closeMessage:function(e,t){var n=e.messages.findIndex((function(e){return e.id==t}));-1!=n&&e.messages.splice(n,1)}},getters:{lengthMessages:function(e){return e.messages.length},messages:function(e){return e.messages},showMessage:function(e){return e.showMessage}}},dt={state:{originalCatalogs:"[]",catalogs:[],catalogById:null,openedCatalog:null,delCatalogs:[],selectedCatalog:null,"сatalogsLoaded":!1,"сatalogByIdLoaded":!1},actions:{FetchCatalogs:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.сatalogsLoaded,type:"catalogs",funcClearDel:"clearDelCatalogs",funcLoaded:"updateCatalogsLoaded",funcUpdate:"updateCatalogs"},$e(e,n);case 2:case"end":return t.stop()}}),t)})))()},FetchCatalogById:function(e,t){return Object(me["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={id:t,type:"catalogs",funcUpdate:"updateCatalogByid",funcLoaded:"updateCatalogByIdLoaded"},e.commit("updateCatalogByIdLoaded",!1),Ve(e,a);case 3:case"end":return n.stop()}}),n)})))()},SaveCatalogs:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={forSave:e.state.catalogs,forDelete:e.state.delCatalogs,updateSelected:"updateSelectedCatalog",updateLoaded:"updateCatalogsLoaded",type:"catalogs",fetch:"FetchCatalogs",save:"SaveCatalogs",nonFilled:"Заполните все поля у каталога!"},Ze(e,n);case 2:case"end":return t.stop()}}),t)})))()},FecthProjectsFromCatalogs:function(e,t){return Object(me["a"])(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="/api/sections/".concat(t),e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,console.log(r);case 8:case"end":return e.stop()}}),e)})))()},TestIMG:function(e,t){var n=t.target.files,a=e.state.catalogs[e.state.selectedCatalog];ge(n,a)},AddCatalog:function(e){var t={title:null,description:null,img:null,action:"add"},n=e.getters.catalogsLength;e.commit("addCatalog",t),e.commit("updateSelectedCatalog",n)},DeleteCatalog:function(e,t){e.commit("updateSelectedCatalog",null),e.commit("deleteCatalog",t)},SelectCatalog:function(e,t){e.commit("updateSelectedCatalog",t)},CancelCatalogs:function(e){e.commit("updateSelectedCatalog",null),e.commit("cancelCatalogs")},UpdateOpenedCatalogs:function(e,t){e.commit("updateOpenedCatalog",t)},OpenCatalog:function(e){var t=e.state.openedCatalog,n=document.getElementById("collapseCatalog"+t);n&&(n.classList.add("show"),e.commit("updateOpenedCatalog",null))}},mutations:{updateCatalogsLoaded:function(e,t){e.сatalogsLoaded=t},updateCatalogByIdLoaded:function(e,t){e.сatalogByIdLoaded=t},updateOpenedCatalog:function(e,t){e.openedCatalog=t},cancelCatalogs:function(e){e.delCatalogs=[],e.catalogs=JSON.parse(e.originalCatalogs)},addCatalog:function(e,t){e.catalogs.push(t)},updateSelectedCatalog:function(e,t){null!=t&&"add"!=e.catalogs[t].action&&(e.catalogs[t].action="edit"),e.selectedCatalog=t},updateCatalogs:function(e,t){e.originalCatalogs=JSON.stringify(t),e.catalogs=t},updateCatalogByid:function(e,t){e.catalogById=t},clearDelCatalogs:function(e){e.delCatalogs=[]},deleteCatalog:function(e,t){"add"==e.catalogs[t].action||e.delCatalogs.push(e.catalogs[t]),e.catalogs.splice(t,1)}},getters:{catalogsLength:function(e){return e.catalogs.length},catalogs:function(e){return e.catalogs},selectedCatalog:function(e){return e.selectedCatalog},openedCatalogs:function(e){return e.openedCatalogs},"сatalogsLoaded":function(e){return e.сatalogsLoaded},"сatalogByIdLoaded":function(e){return e.сatalogByIdLoaded},catalogById:function(e){return e.catalogById}}},pt={state:{showModalAddImage:!1,images:[],delImages:[],imagesLoaded:!1,imageInBase:null},actions:{FetchGallery:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.imagesLoaded,type:"gallery",funcClearDel:"clearDelImages",funcLoaded:"updateImagesLoaded",funcUpdate:"updateImages"},$e(e,n);case 2:case"end":return t.stop()}}),t)})))()},SaveGallery:function(e){var t={forSave:e.state.images,forDelete:e.state.delImages,updateSelected:null,updateLoaded:"updateImagesLoaded",type:"gallery",fetch:"FetchGallery",save:"SaveGallery",nonFilled:"Выберите картинки"};Ze(e,t)},TestImgGallery:function(e,t){var n=this;return Object(me["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.target.files,a.forEach((function(e){var t=he(e);t.then((function(e){n.dispatch("AddImage",e)}))}));case 2:case"end":return e.stop()}}),e)})))()},AddImage:function(e,t){var n={img:t,action:"add"};e.commit("addImage",n)},DeleteImage:function(e,t){e.commit("deteleImage",t)},CloseModalAddImage:function(e){e.commit("updateShowModalAddImage",!1)},OpenModalAddImage:function(e){e.commit("updateShowModalAddImage",!0)}},mutations:{clearDelImages:function(e){e.delImages=[]},deteleImage:function(e,t){"add"==e.images[t].action||e.delImages.push({_id:e.images[t]}),e.images.splice(t,1)},addImage:function(e,t){e.images.push(t)},updateImages:function(e,t){e.images=t},updateShowModalAddImage:function(e,t){e.showModalAddImage=t},updateImagesLoaded:function(e,t){e.imagesLoaded=t}},getters:{showModalAddImage:function(e){return e.showModalAddImage},images:function(e){return e.images},imagesToSave:function(e){return e.imagesToSave},imagesLoaded:function(e){return e.imagesLoaded}}},ft={state:{originalArticles:"[]",articles:[],articleById:null,articlesLoaded:!1,selectedArticle:null,delArticles:[]},actions:{FetchArticles:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.articlesLoaded,type:"articles",funcClearDel:"clearDelArticles",funcLoaded:"updateArticlesLoaded",funcUpdate:"updateArticles"},$e(e,n);case 2:case"end":return t.stop()}}),t)})))()},SaveArticles:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={forSave:e.state.articles,forDelete:e.state.delArticles,updateSelected:"updateSelectedArticle",updateLoaded:"updateArticlesLoaded",type:"articles",fetch:"FetchArticles",save:"SaveArticles",nonFilled:"Заполните все поля у статьи!"},Ze(e,n);case 2:case"end":return t.stop()}}),t)})))()},FetchArticleById:function(e,t){return Object(me["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a={id:t,type:"articles",funcUpdate:"updateArticleByid"},Ve(e,a);case 2:case"end":return n.stop()}}),n)})))()},AddImageArticle:function(e,t){return Object(me["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t.target.files,a.forEach((function(t){var n=he(t);n.then((function(t){e.commit("addImageArticle",t)}))}));case 2:case"end":return n.stop()}}),n)})))()},AddArticle:function(e){var t={title:null,body:null,imgBase:[],action:"add"},n=e.getters.articlesLength;e.commit("addArticle",t),e.commit("updateSelectedArticle",n)},CancelArticles:function(e){e.commit("updateSelectedArticle",null),e.commit("cancelArticles")},SelectArticle:function(e,t){e.commit("updateSelectedArticle",t)},DeleteArticle:function(e,t){e.commit("updateSelectedArticle",null),e.commit("deleteArticle",t)},CopyUrlArticle:function(e,t){this.dispatch("DisplayMessage","Ссылка скопирована!");var n="https://yenisey.sfu-kras.ru/article/".concat(t);navigator.clipboard.writeText(n)},DeleteImageFromArticle:function(e,t){e.commit("deleteImageFromArticle",t)}},mutations:{clearDelArticles:function(e){e.delArticles=[]},deleteImageFromArticle:function(e,t){var n=e.selectedArticle,a=t.index,r=t.array;e.articles[n].imgOld||(e.articles[n].imgOld=[]),e.articles[n].img&&"base"!=r&&(e.articles[n].imgOld.push(e.articles[n].img[a]),e.articles[n].img.splice(a,1)),"base"==r&&e.articles[n].imgBase.splice(a,1)},addImageArticle:function(e,t){var n=e.selectedArticle;e.articles[n].imgBase||a["a"].set(e.articles[n],"imgBase",[]),e.articles[n].imgBase.push(t)},addArticle:function(e,t){e.articles.push(t)},updateArticlesLoaded:function(e,t){e.articlesLoaded=t},updateArticles:function(e,t){e.originalArticles=JSON.stringify(t),e.articles=t},updateSelectedArticle:function(e,t){null!=t&&"add"!=e.articles[t].action&&(e.articles[t].action="edit"),e.selectedArticle=t},deleteArticle:function(e,t){"add"==e.articles[t].action||e.delArticles.push(e.articles[t]),e.articles.splice(t,1)},cancelArticles:function(e){e.delArticles=[],e.articles=JSON.parse(e.originalArticles)},updateArticleByid:function(e,t){e.articleById=t}},getters:{articlesLength:function(e){return e.articles.length},articles:function(e){return e.articles},selectedArticle:function(e){return e.selectedArticle},articlesLoaded:function(e){return e.articlesLoaded},articleById:function(e){return e.articleById}}},mt=(n("7db0"),{state:{carousel:[],selectedCarouselSection:null,carouselLoaded:!1,openedModalCarousel:!1},actions:{FetchCarousel:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n={loaded:e.state.carouselLoaded,type:"carousel",funcClearDel:"",funcLoaded:"updateLoadedCarousel",funcUpdate:"updateCarouse"},$e(e,n);case 2:case"end":return t.stop()}}),t)})))()},SaveCarousel:function(e){return Object(me["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.state.carousel.map((function(e){var t=e.sections.map((function(e){return e._id}));return{_id:e._id,action:"edit",sections:t}})),a={type:"carousel",forSave:n,forDelete:[],updateSelected:"",updateLoaded:"updateLoadedCarousel",fetch:"FetchCarousel",save:"SaveCarousel",nonFilled:"Заполните все поля у главной страницы!"},Ze(e,a);case 3:case"end":return t.stop()}}),t)})))()},OpenModalCarousel:function(e,t){e.commit("changeModalCarousel",!0),e.commit("updateSelectedCarouselSection",t)},CloseModalCarousel:function(e){e.commit("changeModalCarousel",!1),e.commit("updateSelectedCarouselSection",null)},AddCatalogInCarousel:function(e,t){var n=e.getters.catalogs,a=t.target.value,r=n.find((function(e){return e._id==a}));e.commit("addCatalogInCarousel",r)},DeleteCatalogFromCarousel:function(e,t){e.commit("deleteCatalogFromCarousel",t)}},mutations:{deleteCatalogFromCarousel:function(e,t){e.carousel[e.selectedCarouselSection].sections.splice(t,1)},changeModalCarousel:function(e,t){e.openedModalCarousel=t},updateCarouse:function(e,t){e.carousel=t},updateSelectedCarouselSection:function(e,t){e.selectedCarouselSection=t},updateLoadedCarousel:function(e,t){e.carouselLoaded=t},addCatalogInCarousel:function(e,t){e.carousel[e.selectedCarouselSection].sections.push(t)}},getters:{carousel:function(e){return e.carousel},carouselLoaded:function(e){return e.carouselLoaded},openedModalCarousel:function(e){return e.openedModalCarousel},selectedCarouselSection:function(e){return e.selectedCarouselSection}}});a["a"].use(G["a"]);var gt=new G["a"].Store({actions:{},mutations:{},state:{defaultToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link"],["clean"]]},getters:{defaultToolbar:function(e){return e.defaultToolbar}},modules:{map:fe,news:We,users:Ke,login:et,about:tt,projects:ut,message:lt,catalogs:dt,gallery:pt,articles:ft,carousel:mt}});n("ab8b"),n("3e48"),n("3aec");a["a"].config.productionTip=!1,a["a"].use(de["a"]),new a["a"]({router:le,store:gt,render:function(e){return e(ce)}}).$mount("#app")},"85ec":function(e,t,n){},"8c4a":function(e,t,n){"use strict";n("5676")},"92a4":function(e,t,n){"use strict";n("977a")},"977a":function(e,t,n){},"9b19":function(e,t,n){e.exports=n.p+"img/logo.dc778f03.svg"}});
//# sourceMappingURL=app.06a12d6f.js.map
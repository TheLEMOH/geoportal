(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75ab134c"],{"0af7":function(t,e,a){},1276:function(t,e,a){"use strict";var i=a("d784"),s=a("44e7"),n=a("825a"),l=a("1d80"),r=a("4840"),o=a("8aa5"),c=a("50c4"),u=a("14c3"),p=a("9263"),d=a("9f7f"),f=a("d039"),h=d.UNSUPPORTED_Y,b=[].push,m=Math.min,g=4294967295,v=!f((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));i("split",(function(t,e,a){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var i=String(l(this)),n=void 0===a?g:a>>>0;if(0===n)return[];if(void 0===t)return[i];if(!s(t))return e.call(i,t,n);var r,o,c,u=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,h=new RegExp(t.source,d+"g");while(r=p.call(h,i)){if(o=h.lastIndex,o>f&&(u.push(i.slice(f,r.index)),r.length>1&&r.index<i.length&&b.apply(u,r.slice(1)),c=r[0].length,f=o,u.length>=n))break;h.lastIndex===r.index&&h.lastIndex++}return f===i.length?!c&&h.test("")||u.push(""):u.push(i.slice(f)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var s=l(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,s,a):i.call(String(s),e,a)},function(t,s){var l=a(i,this,t,s,i!==e);if(l.done)return l.value;var p=n(this),d=String(t),f=r(p,RegExp),b=p.unicode,v=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(h?"g":"y"),j=new f(h?"^(?:"+p.source+")":p,v),C=void 0===s?g:s>>>0;if(0===C)return[];if(0===d.length)return null===u(j,d)?[d]:[];var _=0,O=0,x=[];while(O<d.length){j.lastIndex=h?0:O;var y,w=u(j,h?d.slice(O):d);if(null===w||(y=m(c(j.lastIndex+(h?O:0)),d.length))===_)O=o(d,O,b);else{if(x.push(d.slice(_,O)),x.length===C)return x;for(var k=1;k<=w.length-1;k++)if(x.push(w[k]),x.length===C)return x;O=_=y}}return x.push(d.slice(_)),x}]}),!v,h)},"15d7":function(t,e,a){"use strict";a("0af7")},"376d":function(t,e,a){},"3c61":function(t,e,a){"use strict";a("eae3")},"44e7":function(t,e,a){var i=a("861d"),s=a("c6b6"),n=a("b622"),l=n("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[l])?!!e:"RegExp"==s(t))}},"4bb4":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mapBox w-100 d-flex"},[a("Sidebar"),a("Map")],1)},s=[],n=a("5530"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidebar-map additional text-white"},[t._m(0),a("div",{staticClass:"tab-content",attrs:{id:"pills-tabContent"}},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"pills-home",role:"tabpanel","aria-labelledby":"pills-home-tab"}},[a("Catalogs")],1),a("div",{staticClass:"tab-pane fade",attrs:{id:"pills-profile",role:"tabpanel","aria-labelledby":"pills-profile-tab"}},[a("BaseMap")],1),a("div",{staticClass:"tab-pane fade",attrs:{id:"pills-contact",role:"tabpanel","aria-labelledby":"pills-contact-tab"}},[a("Legend")],1)])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"nav nav-pills",attrs:{id:"pills-tab",role:"tablist"}},[a("li",{staticClass:"nav-item flex-fill",attrs:{role:"presentation"}},[a("button",{staticClass:"nav-link rounded-0 w-100 active text-white",attrs:{id:"pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#pills-home",type:"button",role:"tab","aria-controls":"pills-home","aria-selected":"true"}},[t._v(" Каталоги ")])]),a("li",{staticClass:"nav-item flex-fill",attrs:{role:"presentation"}},[a("button",{staticClass:"nav-link rounded-0 w-100 text-white",attrs:{id:"pills-profile-tab","data-bs-toggle":"pill","data-bs-target":"#pills-profile",type:"button",role:"tab","aria-controls":"pills-profile","aria-selected":"false"}},[t._v(" Подложки ")])]),a("li",{staticClass:"nav-item flex-fill",attrs:{role:"presentation"}},[a("button",{staticClass:"nav-link rounded-0 w-100 text-white",attrs:{id:"pills-contact-tab","data-bs-toggle":"pill","data-bs-target":"#pills-contact",type:"button",role:"tab","aria-controls":"pills-contact","aria-selected":"false"}},[t._v(" Легенда ")])])])}],o=a("2f62"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"catalogs-map"},[a("ul",{staticClass:"list-group"},t._l(t.ListOfProjectCatalogs,(function(e,i){return a("li",{key:i,staticClass:"p-2 border-bottom"},[a("a",{staticClass:"link link-light fs-5",attrs:{"data-bs-toggle":"collapse",href:"#collapseCatalog"+e.id,role:"button","aria-expanded":"false","aria-controls":"#collapseCatalog"+e.id}},[t._v(t._s(e.title))]),a("div",{staticClass:"collapse",attrs:{id:"collapseCatalog"+e.id}},[t._l(e.children,(function(t,e){return a("Project",{key:e,attrs:{data:t,index:e}})})),0==e.children.length?a("div",{staticClass:"null-children ms-2"},[t._v(" Каталог в стадии наполнения... ")]):t._e()],2)])})),0)])},u=[],p=(a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-map mt-2 ms-2"},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"input-project"+t.data._id},domProps:{checked:t.data.visible},on:{change:function(e){return t.UpdateProjectsToDisplay(t.data)}}}),a("label",{staticClass:"form-check-label link-main-nav",attrs:{for:"input-project"+t.data._id}},[t._v(t._s(t.data.title))]),a("button",{staticClass:"btn ms-3 p-0 text-white",attrs:{"data-bs-toggle":"tooltip",title:t.data._id,disabled:!t.data.center},on:{click:function(e){return t.UpdateCenter(t.data.center)}}},[a("SearchIcon",{staticClass:"link-main-nav"})],1)])])}),d=[],f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{staticClass:"bi bi-search",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"}})])},h=[],b=a("2877"),m={},g=Object(b["a"])(m,f,h,!1,null,null,null),v=g.exports,j={props:["data","index"],components:{SearchIcon:v},computed:Object(n["a"])({},Object(o["c"])(["projectsToDisplay"])),methods:Object(n["a"])({},Object(o["b"])(["UpdateProjectsToDisplay","UpdateCenter"]))},C=j,_=Object(b["a"])(C,p,d,!1,null,null,null),O=_.exports,x={components:{Project:O},mounted:function(){this.OpenProject(),this.OpenCatalog()},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])(["catalogs","projects","projectsToDisplay","openedCatalogs"])),{},{ListOfProjectCatalogs:function(){for(var t=this.catalogs.map((function(t){return{title:t.title,id:t._id,children:[]}})),e=t.length,a=this.projectsToDisplay.length,i=0;i<e;i++)for(var s=0;s<a;s++)t[i].id==this.projectsToDisplay[s].section&&t[i].children.push(this.projectsToDisplay[s]);return t}}),methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])(["UpdateOpenedCatalogs","OpenCatalog","OpenProject"])),Object(o["d"])(["clearProjectsToDisplay"]))},y=x,w=Object(b["a"])(y,c,u,!1,null,null,null),k=w.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"legend-map"},[0!=t.legend.length?a("ul",{staticClass:"list-group"},t._l(t.legend,(function(e,i){return a("li",{key:i,staticClass:"list-group-item bg-transparent"},[a("div",{staticClass:"ms-2 me-auto"},[a("div",{staticClass:"fs-5 text-white"},[t._v(t._s(e.title))]),a("img",{attrs:{src:e.legend}})])])})),0):a("div",{staticClass:"fs-5 text-white m-2"},[t._v("Выберите проект в каталоге")])])},M=[],E=(a("4de4"),{computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])(["projectsToDisplay"])),{},{legend:function(){return this.projectsToDisplay.filter((function(t){if(1==t.visible)return t}))}})}),I=E,B=Object(b["a"])(I,P,M,!1,null,null,null),D=B.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"base-map"},[a("ul",{staticClass:"list-group"},t._l(t.baseMaps,(function(e,i){return a("li",{key:i,staticClass:"p-2"},[a("a",{staticClass:"link link-light fs-5",class:[t.currentBaseMap==i?"linkActive":""],on:{click:function(e){return t.changeBaseMap(i)}}},[t._v(" "+t._s(e.name)+" ")])])})),0)])},S=[],$={computed:Object(o["c"])(["baseMaps","currentBaseMap"]),methods:Object(o["d"])(["changeBaseMap"])},U=$,A=Object(b["a"])(U,T,S,!1,null,null,null),R=A.exports,F={components:{Catalogs:k,Legend:D,BaseMap:R},computed:Object(o["c"])(["currentPanel"]),methods:{}},L=F,z=(a("dc15"),Object(b["a"])(L,l,r,!1,null,null,null)),N=z.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("vl-map",{ref:"map",staticClass:"map",attrs:{"data-projection":"EPSG:3857","load-tiles-while-animating":!0,"load-tiles-while-interacting":!0,controls:!1},on:{click:t.Click}},[a("vl-view",{attrs:{zoom:t.zoom,center:t.center}}),a("vl-layer-tile",[a("vl-source-xyz",{attrs:{url:t.baseMaps[t.currentBaseMap].url,"cross-origin":"none",SameSite:"none"}})],1),t._l(t.projectsToDisplay,(function(e,i){return a("vl-layer-image",{key:i,attrs:{id:e.map,visible:e.visible}},[e.layers?a("vl-source-image-wms",{attrs:{layers:e.layers,url:"/qgisserver/"+e.map,crossOrigin:"anonymous"}}):t._e()],1)})),t.currentPosition?a("vl-overlay",{attrs:{projection:"EPSG:3857",position:t.currentPosition,"auto-pan":!0}},[[a("div",{staticClass:"overlay-videoclip position-absolute additional m-0 p-0"},[a("button",{staticClass:"btn btn-danger rounded-0 float-end",on:{click:t.ClosePopup}},[t._v(" × ")]),t.nameObject?a("h4",{staticClass:"text-white w-100 m-2"},[a("a",{attrs:{href:t.articleObject}},[t._v(" "+t._s(t.nameObject)+" ")])]):a("h4",{staticClass:"text-white w-100 m-2"},[a("a",{attrs:{href:t.articleObject}},[t._v(" "+t._s(t.idObject)+" ")])]),a("Information",{attrs:{data:t.information}})],1)]],2):t._e()],2)},V=[],J=(a("b0c0"),a("ac1f"),a("1276"),a("fb6a"),a("a15b"),a("d3b7"),a("3c20")),X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"list-group list-group-flush"},t._l(t.props,(function(e,i){return a("li",{key:i,staticClass:"list-group-item m-0 p-2"},["img"!=e.field&&"article"!=e.field?a("h5",{staticClass:"fw-bold"},[t._v(" "+t._s(e.field)+" ")]):t._e(),"img"==e.field&&e?a("img",{staticClass:"w-100",attrs:{src:t.imgURLs.maps+t.data.id+"/"+e.value}}):t._e(),"img"!=e.field&&"article"!=e.field?a("label",[t._v(t._s(e.value))]):t._e()])})),0)},q=[],Y={props:["data"],data:function(){return{imgURLs:J["b"]}},computed:{props:function(){var t=this.data.features.properties,e=[];for(var a in t)"ID"!=a&&"id"!=a&&"article"!=a&&"name"!=a&&"Name"!=a&&e.push({field:a,value:t[a]});return e}}},Z=Y,H=Object(b["a"])(Z,X,q,!1,null,null,null),K=H.exports,Q={components:{Information:K},data:function(){return{imgURLs:J["b"]}},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])(["zoom","center","currentPosition","baseMaps","currentBaseMap","projectsToDisplay","capabilities","information"])),{},{nameObject:function(){return this.information.features.properties.name?this.information.features.properties.name:this.information.features.properties.Name?this.information.features.properties.Name:this.information.features.id},idObject:function(){return this.information.features.id},articleObject:function(){return this.information.features.properties.article}}),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["d"])(["changeCurrentPosition"])),Object(o["b"])(["ChangeInformation"])),{},{OpenInfo:function(){this.$store.dispatch("Open")},Click:function(t){var e=this,a=this.$refs.map,i=a.getCoordinateFromPixel(t.pixel),s=a.getView().getResolution(),n=a.getView().getProjection();a.forEachLayerAtPixel(t.pixel,(function(t){if("IMAGE"==t.type){var l=t.getSource().getGetFeatureInfoUrl(i,s,n,{INFO_FORMAT:"application/json"}),r=t.get("id"),o=l.split("BBOX"),c=o[1].split("%2C"),u=6e7/Math.pow(2,a.getView().getZoom());c[0]=+c[0].slice(1)-u,c[1]=+c[1]-u,c[2]=+c[2]+u,c[3]=+c[3]+u;var p=o[0]+"BBOX="+c.join(",");fetch(p).then((function(t){return t.json()})).then((function(t){e.changeCurrentPosition(i),e.ChangeInformation({features:t.features[0],id:r})}))}else e.changeCurrentPosition(void 0)}))},ClosePopup:function(){this.changeCurrentPosition(void 0)}})},W=Q,tt=(a("15d7"),Object(b["a"])(W,G,V,!1,null,null,null)),et=tt.exports,at={components:{Sidebar:N,Map:et},mounted:function(){this.FetchCatalogs(),this.FetchProjects()},methods:Object(n["a"])({},Object(o["b"])(["FetchCatalogs","FetchProjects","Capabilities"]))},it=at,st=(a("3c61"),Object(b["a"])(it,i,s,!1,null,null,null));e["default"]=st.exports},a15b:function(t,e,a){"use strict";var i=a("23e7"),s=a("44ad"),n=a("fc6a"),l=a("a640"),r=[].join,o=s!=Object,c=l("join",",");i({target:"Array",proto:!0,forced:o||!c},{join:function(t){return r.call(n(this),void 0===t?",":t)}})},dc15:function(t,e,a){"use strict";a("376d")},eae3:function(t,e,a){},fb6a:function(t,e,a){"use strict";var i=a("23e7"),s=a("861d"),n=a("e8b5"),l=a("23cb"),r=a("50c4"),o=a("fc6a"),c=a("8418"),u=a("b622"),p=a("1dde"),d=p("slice"),f=u("species"),h=[].slice,b=Math.max;i({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var a,i,u,p=o(this),d=r(p.length),m=l(t,d),g=l(void 0===e?d:e,d);if(n(p)&&(a=p.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?s(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return h.call(p,m,g);for(i=new(void 0===a?Array:a)(b(g-m,0)),u=0;m<g;m++,u++)m in p&&c(i,u,p[m]);return i.length=u,i}})}}]);
//# sourceMappingURL=chunk-75ab134c.cda32d43.js.map